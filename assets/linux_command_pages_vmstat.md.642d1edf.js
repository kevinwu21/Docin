import{_ as s,c as a,o as n,a as l}from"./app.82736834.js";const d=JSON.parse('{"title":"vmstat","description":"","frontmatter":{},"headers":[{"level":2,"title":"补充说明","slug":"补充说明","link":"#补充说明","children":[{"level":3,"title":"语法","slug":"语法","link":"#语法","children":[]},{"level":3,"title":"选项","slug":"选项","link":"#选项","children":[]},{"level":3,"title":"参数","slug":"参数","link":"#参数","children":[]},{"level":3,"title":"实例","slug":"实例","link":"#实例","children":[]}]}],"relativePath":"linux/command/pages/vmstat.md","lastUpdated":1666509709000}'),p={name:"linux/command/pages/vmstat.md"},F=l(`<h1 id="vmstat" tabindex="-1">vmstat <a class="header-anchor" href="#vmstat" aria-hidden="true">#</a></h1><p>显示虚拟内存状态</p><h2 id="补充说明" tabindex="-1">补充说明 <a class="header-anchor" href="#补充说明" aria-hidden="true">#</a></h2><p><strong>vmstat命令</strong> 的含义为显示虚拟内存状态（“Viryual Memor Statics”），但是它可以报告关于进程、内存、I/O等系统整体运行状态。</p><h3 id="语法" tabindex="-1">语法 <a class="header-anchor" href="#语法" aria-hidden="true">#</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">vmstat(选项</span><span style="color:#EEFFFF;">)</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">参数</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="选项" tabindex="-1">选项 <a class="header-anchor" href="#选项" aria-hidden="true">#</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">-a：显示活动内页；</span></span>
<span class="line"><span style="color:#FFCB6B;">-f：显示启动后创建的进程总数；</span></span>
<span class="line"><span style="color:#FFCB6B;">-m：显示slab信息；</span></span>
<span class="line"><span style="color:#FFCB6B;">-n：头信息仅显示一次；</span></span>
<span class="line"><span style="color:#FFCB6B;">-s：以表格方式显示事件计数器和内存状态；</span></span>
<span class="line"><span style="color:#FFCB6B;">-d：报告磁盘状态；</span></span>
<span class="line"><span style="color:#FFCB6B;">-p：显示指定的硬盘分区状态；</span></span>
<span class="line"><span style="color:#FFCB6B;">-S：输出信息的单位。</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="参数" tabindex="-1">参数 <a class="header-anchor" href="#参数" aria-hidden="true">#</a></h3><ul><li>事件间隔：状态信息刷新的时间间隔；</li><li>次数：显示报告的次数。</li></ul><h3 id="实例" tabindex="-1">实例 <a class="header-anchor" href="#实例" aria-hidden="true">#</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">vmstat</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">3</span></span>
<span class="line"><span style="color:#FFCB6B;">procs</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-----------memory----------</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">---swap--</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-----io----</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--system--</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-----cpu------</span></span>
<span class="line"><span style="color:#EEFFFF;"> </span><span style="color:#FFCB6B;">r</span><span style="color:#EEFFFF;">  </span><span style="color:#C3E88D;">b</span><span style="color:#EEFFFF;">   </span><span style="color:#C3E88D;">swpd</span><span style="color:#EEFFFF;">   </span><span style="color:#C3E88D;">free</span><span style="color:#EEFFFF;">   </span><span style="color:#C3E88D;">buff</span><span style="color:#EEFFFF;">  </span><span style="color:#C3E88D;">cache</span><span style="color:#EEFFFF;">   </span><span style="color:#C3E88D;">si</span><span style="color:#EEFFFF;">   </span><span style="color:#C3E88D;">so</span><span style="color:#EEFFFF;">    </span><span style="color:#C3E88D;">bi</span><span style="color:#EEFFFF;">    </span><span style="color:#C3E88D;">bo</span><span style="color:#EEFFFF;">   </span><span style="color:#C3E88D;">in</span><span style="color:#EEFFFF;">   </span><span style="color:#C3E88D;">cs</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">us</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">sy</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">id</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">wa</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">st</span></span>
<span class="line"><span style="color:#EEFFFF;"> </span><span style="color:#FFCB6B;">0</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">    </span><span style="color:#F78C6C;">320</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">42188</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">167332</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">1534368</span><span style="color:#EEFFFF;">    </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">    </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">     </span><span style="color:#F78C6C;">4</span><span style="color:#EEFFFF;">     </span><span style="color:#F78C6C;">7</span><span style="color:#EEFFFF;">    </span><span style="color:#F78C6C;">1</span><span style="color:#EEFFFF;">    </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">99</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#EEFFFF;"> </span><span style="color:#FFCB6B;">0</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">    </span><span style="color:#F78C6C;">320</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">42188</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">167332</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">1534392</span><span style="color:#EEFFFF;">    </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">    </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">     </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">     </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">1002</span><span style="color:#EEFFFF;">   </span><span style="color:#F78C6C;">39</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">100</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#EEFFFF;"> </span><span style="color:#FFCB6B;">0</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">    </span><span style="color:#F78C6C;">320</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">42188</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">167336</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">1534392</span><span style="color:#EEFFFF;">    </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">    </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">     </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">    </span><span style="color:#F78C6C;">19</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">1002</span><span style="color:#EEFFFF;">   </span><span style="color:#F78C6C;">44</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">100</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#EEFFFF;"> </span><span style="color:#FFCB6B;">0</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">    </span><span style="color:#F78C6C;">320</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">42188</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">167336</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">1534392</span><span style="color:#EEFFFF;">    </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">    </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">     </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">     </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">1002</span><span style="color:#EEFFFF;">   </span><span style="color:#F78C6C;">41</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">100</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#EEFFFF;"> </span><span style="color:#FFCB6B;">0</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">    </span><span style="color:#F78C6C;">320</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">42188</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">167336</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">1534392</span><span style="color:#EEFFFF;">    </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">    </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">     </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">     </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">1002</span><span style="color:#EEFFFF;">   </span><span style="color:#F78C6C;">41</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">100</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">0</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>字段说明：</strong></p><p>Procs（进程）</p><ul><li>r: 运行队列中进程数量，这个值也可以判断是否需要增加CPU。（长期大于1）</li><li>b: 等待IO的进程数量。</li></ul><p>Memory（内存）</p><ul><li>swpd: 使用虚拟内存大小，如果swpd的值不为0，但是SI，SO的值长期为0，这种情况不会影响系统性能。</li><li>free: 空闲物理内存大小。</li><li>buff: 用作缓冲的内存大小。</li><li>cache: 用作缓存的内存大小，如果cache的值大的时候，说明cache处的文件数多，如果频繁访问到的文件都能被cache处，那么磁盘的读IO bi会非常小。</li></ul><p>Swap</p><ul><li>si: 每秒从交换区写到内存的大小，由磁盘调入内存。</li><li>so: 每秒写入交换区的内存大小，由内存调入磁盘。</li></ul><p>注意：内存够用的时候，这2个值都是0，如果这2个值长期大于0时，系统性能会受到影响，磁盘IO和CPU资源都会被消耗。有些朋友看到空闲内存（free）很少的或接近于0时，就认为内存不够用了，不能光看这一点，还要结合si和so，如果free很少，但是si和so也很少（大多时候是0），那么不用担心，系统性能这时不会受到影响的。</p><p>IO（现在的Linux版本块的大小为1kb）</p><ul><li>bi: 每秒读取的块数</li><li>bo: 每秒写入的块数</li></ul><p>注意：随机磁盘读写的时候，这2个值越大（如超出1024k)，能看到CPU在IO等待的值也会越大。</p><p>system（系统）</p><ul><li>in: 每秒中断数，包括时钟中断。</li><li>cs: 每秒上下文切换数。</li></ul><p>注意：上面2个值越大，会看到由内核消耗的CPU时间会越大。</p><p>CPU（以百分比表示）</p><ul><li>us: 用户进程执行时间百分比(user time)</li></ul><p>us的值比较高时，说明用户进程消耗的CPU时间多，但是如果长期超50%的使用，那么我们就该考虑优化程序算法或者进行加速。</p><ul><li>sy: 内核系统进程执行时间百分比(system time)</li></ul><p>sy的值高时，说明系统内核消耗的CPU资源多，这并不是良性表现，我们应该检查原因。</p><ul><li>wa: IO等待时间百分比</li></ul><p>wa的值高时，说明IO等待比较严重，这可能由于磁盘大量作随机访问造成，也有可能磁盘出现瓶颈（块操作）。</p><ul><li>id: 空闲时间百分比</li></ul>`,34),o=[F];function e(r,t,c,y,E,C){return n(),a("div",null,o)}const u=s(p,[["render",e]]);export{d as __pageData,u as default};

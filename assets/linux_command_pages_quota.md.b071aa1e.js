import{_ as s,c as a,o as n,a as l}from"./app.82736834.js";const d=JSON.parse('{"title":"quota","description":"","frontmatter":{},"headers":[{"level":2,"title":"补充说明","slug":"补充说明","link":"#补充说明","children":[{"level":3,"title":"语法","slug":"语法","link":"#语法","children":[]},{"level":3,"title":"选项","slug":"选项","link":"#选项","children":[]},{"level":3,"title":"参数","slug":"参数","link":"#参数","children":[]},{"level":3,"title":"实例","slug":"实例","link":"#实例","children":[]}]}],"relativePath":"linux/command/pages/quota.md","lastUpdated":1666509709000}'),p={name:"linux/command/pages/quota.md"},o=l(`<h1 id="quota" tabindex="-1">quota <a class="header-anchor" href="#quota" aria-hidden="true">#</a></h1><p>显示磁盘已使用的空间与限制</p><h2 id="补充说明" tabindex="-1">补充说明 <a class="header-anchor" href="#补充说明" aria-hidden="true">#</a></h2><p><strong>quota命令</strong> 用于显示用户或者工作组的磁盘配额信息。输出信息包括磁盘使用和配额限制。</p><h3 id="语法" tabindex="-1">语法 <a class="header-anchor" href="#语法" aria-hidden="true">#</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">quota(选项</span><span style="color:#EEFFFF;">)</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">参数</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="选项" tabindex="-1">选项 <a class="header-anchor" href="#选项" aria-hidden="true">#</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">-g：列出群组的磁盘空间限制；</span></span>
<span class="line"><span style="color:#FFCB6B;">-q：简明列表，只列出超过限制的部分；</span></span>
<span class="line"><span style="color:#FFCB6B;">-u：列出用户的磁盘空间限制；</span></span>
<span class="line"><span style="color:#FFCB6B;">-v：显示该用户或群组，在所有挂入系统的存储设备的空间限制；</span></span>
<span class="line"><span style="color:#FFCB6B;">-V：显示版本信息。</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="参数" tabindex="-1">参数 <a class="header-anchor" href="#参数" aria-hidden="true">#</a></h3><p>用户或者工作组：指定要显示的用户或者工作组。</p><h3 id="实例" tabindex="-1">实例 <a class="header-anchor" href="#实例" aria-hidden="true">#</a></h3><p>我们可以限制某一群组所能使用的最大磁盘配额，而且可以再限制某一使用者的最大磁盘配额 ，好比做一个收费的应用，vip可以得到空间更大一些。另外，以 Link 的方式，来使邮件可以作为限制的配额（更改<code>/var/spool/mail</code> 这个路径），不2，需要重新再规划一个硬盘！直接使用 Link 的方式指向 /home （或者其它已经做好的 quota 磁盘）就可以！这通常是用在原本规划不好，但是却又不想要更动原有主机架构的情况中！</p><p>要求：Linux 主机里面主要针对 quser1 及 quser2 两个使用者来进行磁盘配额， 且这两个使用者都是挂在 qgroup 组里面的。每个使用者总共有 50MB 的磁盘空间 (不考虑 inode) 限制！并且 soft limit 为 45 MB；而宽限时间设定为 1 天， 但是在一天之内必须要将多余的文件删除掉，否则将无法使用剩下的空间 ；gquota 这个组考虑最大限额，所以设定为 90 MB！（注意，这样设置的好处是富有弹性，好比现在的邮件服务，那么多用户，承诺给用户每人最大空间为数GB，然而人们不可能每人都会使用那么大的空间，所以邮件服务的总空间，实际上肯定不是注册客户数乘以数GB，否则这样得多大啊。）</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@localhost </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># groupadd qgroup</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@localhost </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># useradd -m -g qgroup quser1</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@localhost </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># useradd -m -g qgroup quser2</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@localhost </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># passwd quser1</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@localhost </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># passwd quser2</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@localhost </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># df     ===</span><span style="color:#89DDFF;">&gt;</span><span style="color:#EEFFFF;">  自己找一个合适的分区来做实验，这里用/disk2</span></span>
<span class="line"><span style="color:#FFCB6B;">Filesystem</span><span style="color:#EEFFFF;">             </span><span style="color:#C3E88D;">1K-blocks</span><span style="color:#EEFFFF;">        </span><span style="color:#C3E88D;">Used</span><span style="color:#EEFFFF;">      </span><span style="color:#C3E88D;">Available</span><span style="color:#EEFFFF;">   </span><span style="color:#C3E88D;">Use%</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">Mounted</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">on</span></span>
<span class="line"><span style="color:#FFCB6B;">/dev/hda1</span><span style="color:#EEFFFF;">              </span><span style="color:#F78C6C;">5952252</span><span style="color:#EEFFFF;">   </span><span style="color:#F78C6C;">3193292</span><span style="color:#EEFFFF;">     </span><span style="color:#F78C6C;">2451720</span><span style="color:#EEFFFF;">     </span><span style="color:#F78C6C;">57</span><span style="color:#C3E88D;">%</span><span style="color:#EEFFFF;">     </span><span style="color:#C3E88D;">/</span></span>
<span class="line"><span style="color:#FFCB6B;">/dev/hdb1</span><span style="color:#EEFFFF;">            </span><span style="color:#F78C6C;">28267608</span><span style="color:#EEFFFF;">       </span><span style="color:#F78C6C;">77904</span><span style="color:#EEFFFF;">   </span><span style="color:#F78C6C;">26730604</span><span style="color:#EEFFFF;">       </span><span style="color:#F78C6C;">1</span><span style="color:#C3E88D;">%</span><span style="color:#EEFFFF;">     </span><span style="color:#C3E88D;">/disk2</span></span>
<span class="line"><span style="color:#FFCB6B;">/dev/hda5</span><span style="color:#EEFFFF;">              </span><span style="color:#F78C6C;">9492644</span><span style="color:#EEFFFF;">     </span><span style="color:#F78C6C;">227252</span><span style="color:#EEFFFF;">     </span><span style="color:#F78C6C;">8775412</span><span style="color:#EEFFFF;">       </span><span style="color:#F78C6C;">3</span><span style="color:#C3E88D;">%</span><span style="color:#EEFFFF;">     </span><span style="color:#C3E88D;">/disk1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@localhost </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># vi /etc/fstab</span></span>
<span class="line"><span style="color:#EEFFFF;">LABEL</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">/</span><span style="color:#EEFFFF;">             /                ext3      defaults                                     </span><span style="color:#F78C6C;">1</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#EEFFFF;">LABEL</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">/disk1</span><span style="color:#EEFFFF;">    /disk1        ext3      defaults                                      </span><span style="color:#F78C6C;">1</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">2</span></span>
<span class="line"><span style="color:#EEFFFF;">LABEL</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">/disk2</span><span style="color:#EEFFFF;">    /disk2        ext3      defaults,usrquota,grpquota       </span><span style="color:#F78C6C;">1</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">2</span><span style="color:#EEFFFF;">  </span></span>
<span class="line"><span style="color:#FFCB6B;">/dev/hda3</span><span style="color:#EEFFFF;">         </span><span style="color:#C3E88D;">swap</span><span style="color:#EEFFFF;">         </span><span style="color:#C3E88D;">swap</span><span style="color:#EEFFFF;">     </span><span style="color:#C3E88D;">defaults</span><span style="color:#EEFFFF;">                                     </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>注意多了<code>usrquota,grpquota</code>，在<code>defaults,usrquota,grpquota</code>之间都没有空格，务必正确书写。这样就算加入了 quota 的磁盘格式了！不过，由于真正的 quota 在读取的时候是读取<code>/etc/mtab</code>这个文件的，而该文件需要重新开机之后才能够以/etc/fstab 的新数据进行改写！所以这个时候可以选择：重新开机 (reboot)。</p><p>重新<code>remount filesystem</code>来驱动设定值。</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@localhost </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># umount /dev/hdb1</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@localhost </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># mount -a</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@localhost </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># grep </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/disk2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#EEFFFF;"> /etc/mtab</span></span>
<span class="line"><span style="color:#FFCB6B;">/dev/hdb1</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/disk2</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">ext3</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">rw,usrquota,grpquota</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>事实上，也可以利用 mount 的 remount 功能。</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@localhost </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># mount -o remount /disk2</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>这样就已经成功的将 filesystem 的 quota 功能加入。</p><p>扫瞄磁盘的使用者使用状况，并产生重要的 aquota.group 与 aquota.user：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@localhost </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># quotacheck -avug</span></span>
<span class="line"><span style="color:#FFCB6B;">quotacheck:</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">Scanning</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/dev/hdb1</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">/disk2</span><span style="color:#89DDFF;">]</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">done</span></span>
<span class="line"><span style="color:#FFCB6B;">quotacheck:</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">Checked</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">3</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">directories</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">and</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">4</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">files</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@localhost </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># ll /disk2</span></span>
<span class="line"><span style="color:#FFCB6B;">-rw-------</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">1</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">root</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">root</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">6144</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">Sep</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">6</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">11</span><span style="color:#C3E88D;">:</span><span style="color:#F78C6C;">44</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">aquota.group</span></span>
<span class="line"><span style="color:#FFCB6B;">-rw-------</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">1</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">root</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">root</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">6144</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">Sep</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">6</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">11</span><span style="color:#C3E88D;">:</span><span style="color:#F78C6C;">44</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">aquota.user</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>使用 quotacheck 就可以轻易的将所需要的数据给他输出了！但奇怪的是，在某些 Linux 版本中，不能够以 aquota.user(group) 来启动quota ，可能是因为旧版 quota 的关系， 所以就另外做了一个 link 文件按来欺骗 quota，这个动作非必要。（主要是学习这个思维很重要）</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@localhost </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># cd /disk2</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@localhost </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># ln -s aquota.user quota.user</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@localhost </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># ln -s aquota.group quota.group</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>启动 quota 的限额：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@localhost </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># quotaon -avug</span></span>
<span class="line"><span style="color:#FFCB6B;">/dev/hdb1</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">/disk2</span><span style="color:#89DDFF;">]</span><span style="color:#EEFFFF;">: </span><span style="color:#C3E88D;">group</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">quotas</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">turned</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">on</span></span>
<span class="line"><span style="color:#FFCB6B;">/dev/hdb1</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">/disk2</span><span style="color:#89DDFF;">]</span><span style="color:#EEFFFF;">: </span><span style="color:#C3E88D;">user</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">quotas</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">turned</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">on</span><span style="color:#EEFFFF;">    </span><span style="color:#C3E88D;">==</span><span style="color:#EEFFFF;">=</span><span style="color:#89DDFF;">&gt;</span><span style="color:#EEFFFF;">  </span><span style="color:#C3E88D;">看到turned</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">on，才是真的成功！</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>编辑使用者的可使用空间：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@localhost </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># edquota -u quser1</span></span>
<span class="line"><span style="color:#FFCB6B;">Disk</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">quotas</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">for</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">user</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">quser1</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">uid</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">502</span><span style="color:#89DDFF;">)</span><span style="color:#EEFFFF;">:</span></span>
<span class="line"><span style="color:#EEFFFF;">  </span><span style="color:#FFCB6B;">Filesystem</span><span style="color:#EEFFFF;">    </span><span style="color:#C3E88D;">blocks</span><span style="color:#EEFFFF;">    </span><span style="color:#C3E88D;">soft</span><span style="color:#EEFFFF;">    </span><span style="color:#C3E88D;">hard</span><span style="color:#EEFFFF;">   </span><span style="color:#C3E88D;">inodes</span><span style="color:#EEFFFF;">   </span><span style="color:#C3E88D;">soft</span><span style="color:#EEFFFF;">   </span><span style="color:#C3E88D;">hard</span></span>
<span class="line"><span style="color:#EEFFFF;">  </span><span style="color:#FFCB6B;">/dev/hdb1</span><span style="color:#EEFFFF;">           </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">     </span><span style="color:#F78C6C;">45000</span><span style="color:#EEFFFF;">    </span><span style="color:#F78C6C;">50000</span><span style="color:#EEFFFF;">         </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">      </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">      </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@localhost </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># edquota -p quser1 quser2      ===</span><span style="color:#89DDFF;">&gt;</span><span style="color:#EEFFFF;">  直接复制给quser2</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>接下来要来设定宽限时间，还是使用 edquota</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@localhost </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># edquota -t</span></span>
<span class="line"><span style="color:#FFCB6B;">Grace</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">period</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">before</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">enforcing</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">soft</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">limits</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">for</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">users:</span></span>
<span class="line"><span style="color:#F78C6C;">time</span><span style="color:#EEFFFF;"> units may be: days, hours, minutes, or seconds</span></span>
<span class="line"><span style="color:#EEFFFF;">  </span><span style="color:#FFCB6B;">Filesystem</span><span style="color:#EEFFFF;">             </span><span style="color:#C3E88D;">Block</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">grace</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">period</span><span style="color:#EEFFFF;">     </span><span style="color:#C3E88D;">Inode</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">grace</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">period</span></span>
<span class="line"><span style="color:#EEFFFF;">  </span><span style="color:#FFCB6B;">/dev/hdb1</span><span style="color:#EEFFFF;">                     </span><span style="color:#C3E88D;">1days</span><span style="color:#EEFFFF;">                  </span><span style="color:#C3E88D;">7days</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>使用<code>quota -v</code>来查询：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@localhost </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># quota -vu quser1 quser2</span></span>
<span class="line"><span style="color:#FFCB6B;">Disk</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">quotas</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">for</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">user</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">quser1</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">uid</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">502</span><span style="color:#89DDFF;">)</span><span style="color:#EEFFFF;">:</span></span>
<span class="line"><span style="color:#EEFFFF;">     </span><span style="color:#FFCB6B;">Filesystem</span><span style="color:#EEFFFF;">  </span><span style="color:#C3E88D;">blocks</span><span style="color:#EEFFFF;">   </span><span style="color:#C3E88D;">quota</span><span style="color:#EEFFFF;">      </span><span style="color:#C3E88D;">limit</span><span style="color:#EEFFFF;">   </span><span style="color:#C3E88D;">grace</span><span style="color:#EEFFFF;">   </span><span style="color:#C3E88D;">files</span><span style="color:#EEFFFF;">   </span><span style="color:#C3E88D;">quota</span><span style="color:#EEFFFF;">   </span><span style="color:#C3E88D;">limit</span><span style="color:#EEFFFF;">   </span><span style="color:#C3E88D;">grace</span></span>
<span class="line"><span style="color:#EEFFFF;">      </span><span style="color:#FFCB6B;">/dev/hdb1</span><span style="color:#EEFFFF;">         </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">    </span><span style="color:#F78C6C;">45000</span><span style="color:#EEFFFF;">    </span><span style="color:#F78C6C;">50000</span><span style="color:#EEFFFF;">                   </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">       </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">       </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#FFCB6B;">Disk</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">quotas</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">for</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">user</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">quser2</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">uid</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">503</span><span style="color:#89DDFF;">)</span><span style="color:#EEFFFF;">:</span></span>
<span class="line"><span style="color:#EEFFFF;">     </span><span style="color:#FFCB6B;">Filesystem</span><span style="color:#EEFFFF;">  </span><span style="color:#C3E88D;">blocks</span><span style="color:#EEFFFF;">   </span><span style="color:#C3E88D;">quota</span><span style="color:#EEFFFF;">      </span><span style="color:#C3E88D;">limit</span><span style="color:#EEFFFF;">   </span><span style="color:#C3E88D;">grace</span><span style="color:#EEFFFF;">   </span><span style="color:#C3E88D;">files</span><span style="color:#EEFFFF;">   </span><span style="color:#C3E88D;">quota</span><span style="color:#EEFFFF;">   </span><span style="color:#C3E88D;">limit</span><span style="color:#EEFFFF;">   </span><span style="color:#C3E88D;">grace</span></span>
<span class="line"><span style="color:#EEFFFF;">      </span><span style="color:#FFCB6B;">/dev/hdb1</span><span style="color:#EEFFFF;">         </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">    </span><span style="color:#F78C6C;">45000</span><span style="color:#EEFFFF;">    </span><span style="color:#F78C6C;">50000</span><span style="color:#EEFFFF;">                   </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">       </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">       </span><span style="color:#F78C6C;">0</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>注意，由于使用者尚未超过45 MB，所以 grace ( 宽限时间 ) 就不会出现。</p><p>编辑群组可使用的空间：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@localhost </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># edquota -g qgroup</span></span>
<span class="line"><span style="color:#FFCB6B;">Disk</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">quotas</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">for</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">group</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">qgroup</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">gid</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">502</span><span style="color:#89DDFF;">)</span><span style="color:#EEFFFF;">:</span></span>
<span class="line"><span style="color:#EEFFFF;">  </span><span style="color:#FFCB6B;">Filesystem</span><span style="color:#EEFFFF;">     </span><span style="color:#C3E88D;">blocks</span><span style="color:#EEFFFF;">       </span><span style="color:#C3E88D;">soft</span><span style="color:#EEFFFF;">       </span><span style="color:#C3E88D;">hard</span><span style="color:#EEFFFF;">    </span><span style="color:#C3E88D;">inodes</span><span style="color:#EEFFFF;">   </span><span style="color:#C3E88D;">soft</span><span style="color:#EEFFFF;">   </span><span style="color:#C3E88D;">hard</span></span>
<span class="line"><span style="color:#EEFFFF;">  </span><span style="color:#FFCB6B;">/dev/hdb1</span><span style="color:#EEFFFF;">            </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">      </span><span style="color:#F78C6C;">80000</span><span style="color:#EEFFFF;">   </span><span style="color:#F78C6C;">90000</span><span style="color:#EEFFFF;">           </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">      </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">      </span><span style="color:#F78C6C;">0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@localhost </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># quota -vg qgroup</span></span>
<span class="line"><span style="color:#FFCB6B;">Disk</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">quotas</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">for</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">group</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">qgroup</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">gid</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">502</span><span style="color:#89DDFF;">)</span><span style="color:#EEFFFF;">:</span></span>
<span class="line"><span style="color:#EEFFFF;">     </span><span style="color:#FFCB6B;">Filesystem</span><span style="color:#EEFFFF;">   </span><span style="color:#C3E88D;">blocks</span><span style="color:#EEFFFF;">    </span><span style="color:#C3E88D;">quota</span><span style="color:#EEFFFF;">      </span><span style="color:#C3E88D;">limit</span><span style="color:#EEFFFF;">      </span><span style="color:#C3E88D;">grace</span><span style="color:#EEFFFF;">    </span><span style="color:#C3E88D;">files</span><span style="color:#EEFFFF;">   </span><span style="color:#C3E88D;">quota</span><span style="color:#EEFFFF;">   </span><span style="color:#C3E88D;">limit</span><span style="color:#EEFFFF;">   </span><span style="color:#C3E88D;">grace</span></span>
<span class="line"><span style="color:#EEFFFF;">      </span><span style="color:#FFCB6B;">/dev/hdb1</span><span style="color:#EEFFFF;">         </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">     </span><span style="color:#F78C6C;">80000</span><span style="color:#EEFFFF;">   </span><span style="color:#F78C6C;">90000</span><span style="color:#EEFFFF;">                       </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">        </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">        </span><span style="color:#F78C6C;">0</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div>`,35),F=[o];function e(r,c,t,E,y,i){return n(),a("div",null,F)}const u=s(p,[["render",e]]);export{d as __pageData,u as default};

import{_ as s,c as n,o as a,a as l}from"./app.82736834.js";const d=JSON.parse('{"title":"chage","description":"","frontmatter":{},"headers":[{"level":2,"title":"补充说明","slug":"补充说明","link":"#补充说明","children":[{"level":3,"title":"语法","slug":"语法","link":"#语法","children":[]},{"level":3,"title":"选项","slug":"选项","link":"#选项","children":[]},{"level":3,"title":"实例","slug":"实例","link":"#实例","children":[]}]}],"relativePath":"linux/command/pages/chage.md","lastUpdated":1666509709000}'),p={name:"linux/command/pages/chage.md"},e=l(`<h1 id="chage" tabindex="-1">chage <a class="header-anchor" href="#chage" aria-hidden="true">#</a></h1><p>修改帐号和密码的有效期限</p><h2 id="补充说明" tabindex="-1">补充说明 <a class="header-anchor" href="#补充说明" aria-hidden="true">#</a></h2><p><strong>chage命令</strong> 是用来修改帐号和密码的有效期限。</p><h3 id="语法" tabindex="-1">语法 <a class="header-anchor" href="#语法" aria-hidden="true">#</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">chage</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">选项</span><span style="color:#89DDFF;">]</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">用户名</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="选项" tabindex="-1">选项 <a class="header-anchor" href="#选项" aria-hidden="true">#</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">-m：密码可更改的最小天数。为零时代表任何时候都可以更改密码。</span></span>
<span class="line"><span style="color:#FFCB6B;">-M：密码保持有效的最大天数。</span></span>
<span class="line"><span style="color:#FFCB6B;">-w：用户密码到期前，提前收到警告信息的天数。</span></span>
<span class="line"><span style="color:#FFCB6B;">-E：帐号到期的日期。过了这天，此帐号将不可用。</span></span>
<span class="line"><span style="color:#FFCB6B;">-d：上一次更改的日期。</span></span>
<span class="line"><span style="color:#FFCB6B;">-I：停滞时期。如果一个密码已过期这些天，那么此帐号将不可用。</span></span>
<span class="line"><span style="color:#FFCB6B;">-l：例出当前的设置。由非特权用户来确定他们的密码或帐号何时过期。</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="实例" tabindex="-1">实例 <a class="header-anchor" href="#实例" aria-hidden="true">#</a></h3><p>可以编辑<code>/etc/login.defs</code>来设定几个参数，以后设置口令默认就按照参数设定为准：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">PASS_MAX_DAYS</span><span style="color:#EEFFFF;">   </span><span style="color:#F78C6C;">99999</span></span>
<span class="line"><span style="color:#FFCB6B;">PASS_MIN_DAYS</span><span style="color:#EEFFFF;">   </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#FFCB6B;">PASS_MIN_LEN</span><span style="color:#EEFFFF;">    </span><span style="color:#F78C6C;">5</span></span>
<span class="line"><span style="color:#FFCB6B;">PASS_WARN_AGE</span><span style="color:#EEFFFF;">   </span><span style="color:#F78C6C;">7</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>当然在<code>/etc/default/useradd</code>可以找到如下2个参数进行设置：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#545454;font-style:italic;"># useradd defaults file</span></span>
<span class="line"><span style="color:#EEFFFF;">GROUP</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">100</span></span>
<span class="line"><span style="color:#EEFFFF;">HOME</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">/home</span></span>
<span class="line"><span style="color:#EEFFFF;">INACTIVE</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">-</span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#EEFFFF;">EXPIRE</span><span style="color:#89DDFF;">=</span></span>
<span class="line"><span style="color:#EEFFFF;">SHELL</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">/bin/bash</span></span>
<span class="line"><span style="color:#EEFFFF;">SKEL</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">/etc/skel</span></span>
<span class="line"><span style="color:#EEFFFF;">CREATE_MAIL_SPOOL</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">yes</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>通过修改配置文件，能对之后新建用户起作用，而目前系统已经存在的用户，则直接用chage来配置。</p><p>我的服务器root帐户密码策略信息如下：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">chage</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-l</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">root</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">最近一次密码修改时间</span><span style="color:#EEFFFF;">                  </span><span style="color:#C3E88D;">：</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">3月</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">12</span><span style="color:#C3E88D;">,</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">2013</span></span>
<span class="line"><span style="color:#FFCB6B;">密码过期时间</span><span style="color:#EEFFFF;">                         </span><span style="color:#C3E88D;">：从不</span></span>
<span class="line"><span style="color:#FFCB6B;">密码失效时间</span><span style="color:#EEFFFF;">                         </span><span style="color:#C3E88D;">：从不</span></span>
<span class="line"><span style="color:#FFCB6B;">帐户过期时间</span><span style="color:#EEFFFF;">                         </span><span style="color:#C3E88D;">：从不</span></span>
<span class="line"><span style="color:#FFCB6B;">两次改变密码之间相距的最小天数</span><span style="color:#EEFFFF;">          </span><span style="color:#C3E88D;">：</span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#FFCB6B;">两次改变密码之间相距的最大天数</span><span style="color:#EEFFFF;">          </span><span style="color:#C3E88D;">：</span><span style="color:#F78C6C;">99999</span></span>
<span class="line"><span style="color:#FFCB6B;">在密码过期之前警告的天数</span><span style="color:#EEFFFF;">               </span><span style="color:#C3E88D;">：</span><span style="color:#F78C6C;">7</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>我可以通过如下命令修改我的密码过期时间：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">chage</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-M</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">60</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">root</span></span>
<span class="line"><span style="color:#FFCB6B;">chage</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-l</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">root</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">最近一次密码修改时间</span><span style="color:#EEFFFF;">                  </span><span style="color:#C3E88D;">：</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">3月</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">12</span><span style="color:#C3E88D;">,</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">2013</span></span>
<span class="line"><span style="color:#FFCB6B;">密码过期时间</span><span style="color:#EEFFFF;">                         </span><span style="color:#C3E88D;">：</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">5月</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">11</span><span style="color:#C3E88D;">,</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">2013</span></span>
<span class="line"><span style="color:#FFCB6B;">密码失效时间</span><span style="color:#EEFFFF;">                         </span><span style="color:#C3E88D;">：从不</span></span>
<span class="line"><span style="color:#FFCB6B;">帐户过期时间</span><span style="color:#EEFFFF;">                         </span><span style="color:#C3E88D;">：从不</span></span>
<span class="line"><span style="color:#FFCB6B;">两次改变密码之间相距的最小天数</span><span style="color:#EEFFFF;">          </span><span style="color:#C3E88D;">：</span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#FFCB6B;">两次改变密码之间相距的最大天数</span><span style="color:#EEFFFF;">          </span><span style="color:#C3E88D;">：</span><span style="color:#F78C6C;">60</span></span>
<span class="line"><span style="color:#FFCB6B;">在密码过期之前警告的天数</span><span style="color:#EEFFFF;">               </span><span style="color:#C3E88D;">：</span><span style="color:#F78C6C;">9</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>然后通过如下命令设置密码失效时间：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">chage</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-I</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">5</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">root</span></span>
<span class="line"><span style="color:#FFCB6B;">chage</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-l</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">root</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">最近一次密码修改时间</span><span style="color:#EEFFFF;">                  </span><span style="color:#C3E88D;">：</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">3月</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">12</span><span style="color:#C3E88D;">,</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">2013</span></span>
<span class="line"><span style="color:#FFCB6B;">密码过期时间</span><span style="color:#EEFFFF;">                         </span><span style="color:#C3E88D;">：</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">5月</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">11</span><span style="color:#C3E88D;">,</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">2013</span></span>
<span class="line"><span style="color:#FFCB6B;">密码失效时间</span><span style="color:#EEFFFF;">                         </span><span style="color:#C3E88D;">：</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">5月</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">16</span><span style="color:#C3E88D;">,</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">2013</span></span>
<span class="line"><span style="color:#FFCB6B;">帐户过期时间</span><span style="color:#EEFFFF;">                         </span><span style="color:#C3E88D;">：从不</span></span>
<span class="line"><span style="color:#FFCB6B;">两次改变密码之间相距的最小天数</span><span style="color:#EEFFFF;">          </span><span style="color:#C3E88D;">：</span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#FFCB6B;">两次改变密码之间相距的最大天数</span><span style="color:#EEFFFF;">          </span><span style="color:#C3E88D;">：</span><span style="color:#F78C6C;">60</span></span>
<span class="line"><span style="color:#FFCB6B;">在密码过期之前警告的天数</span><span style="color:#EEFFFF;">               </span><span style="color:#C3E88D;">：</span><span style="color:#F78C6C;">9</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>从上述命令可以看到，在密码过期后5天，密码自动失效，这个用户将无法登陆系统了。</p>`,21),o=[e];function r(c,F,t,i,y,E){return a(),n("div",null,o)}const b=s(p,[["render",r]]);export{d as __pageData,b as default};

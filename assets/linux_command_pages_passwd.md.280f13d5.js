import{_ as s,c as n,o as a,a as l}from"./app.82736834.js";const u=JSON.parse('{"title":"passwd","description":"","frontmatter":{},"headers":[{"level":2,"title":"补充说明","slug":"补充说明","link":"#补充说明","children":[{"level":3,"title":"语法","slug":"语法","link":"#语法","children":[]},{"level":3,"title":"选项","slug":"选项","link":"#选项","children":[]},{"level":3,"title":"参数","slug":"参数","link":"#参数","children":[]},{"level":3,"title":"知识扩展","slug":"知识扩展","link":"#知识扩展","children":[]},{"level":3,"title":"实例","slug":"实例","link":"#实例","children":[]}]}],"relativePath":"linux/command/pages/passwd.md","lastUpdated":1666509709000}'),p={name:"linux/command/pages/passwd.md"},e=l(`<h1 id="passwd" tabindex="-1">passwd <a class="header-anchor" href="#passwd" aria-hidden="true">#</a></h1><p>用于让用户可以更改自己的密码</p><h2 id="补充说明" tabindex="-1">补充说明 <a class="header-anchor" href="#补充说明" aria-hidden="true">#</a></h2><p><strong>passwd命令</strong> 用于设置用户的认证信息，包括用户密码、密码过期时间等。系统管理者则能用它管理系统用户的密码。只有管理者可以指定用户名称，一般用户只能变更自己的密码。</p><h3 id="语法" tabindex="-1">语法 <a class="header-anchor" href="#语法" aria-hidden="true">#</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">passwd(选项</span><span style="color:#EEFFFF;">)</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">参数</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="选项" tabindex="-1">选项 <a class="header-anchor" href="#选项" aria-hidden="true">#</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">-d：删除密码，仅有系统管理者才能使用；</span></span>
<span class="line"><span style="color:#FFCB6B;">-f：强制执行；</span></span>
<span class="line"><span style="color:#FFCB6B;">-k：设置只有在密码过期失效后，方能更新；</span></span>
<span class="line"><span style="color:#FFCB6B;">-l：锁住密码；</span></span>
<span class="line"><span style="color:#FFCB6B;">-s：列出密码的相关信息，仅有系统管理者才能使用；</span></span>
<span class="line"><span style="color:#FFCB6B;">-u：解开已上锁的帐号。</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="参数" tabindex="-1">参数 <a class="header-anchor" href="#参数" aria-hidden="true">#</a></h3><p>用户名：需要设置密码的用户名。</p><h3 id="知识扩展" tabindex="-1">知识扩展 <a class="header-anchor" href="#知识扩展" aria-hidden="true">#</a></h3><p>与用户、组账户信息相关的文件</p><p>存放用户信息：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">/etc/passwd</span></span>
<span class="line"><span style="color:#FFCB6B;">/etc/shadow</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>存放组信息：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">/etc/group</span></span>
<span class="line"><span style="color:#FFCB6B;">/etc/gshadow</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>用户信息文件分析（每项用<code>:</code>隔开）</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">例如：jack:X:503:504:</span><span style="color:#82AAFF;">::</span><span style="color:#FFCB6B;">/home/jack/</span><span style="color:#82AAFF;">:</span><span style="color:#FFCB6B;">/bin/bash</span></span>
<span class="line"><span style="color:#FFCB6B;">jack</span><span style="color:#EEFFFF;">　　</span><span style="color:#545454;font-style:italic;"># 用户名</span></span>
<span class="line"><span style="color:#FFCB6B;">X</span><span style="color:#EEFFFF;">　　</span><span style="color:#545454;font-style:italic;"># 口令、密码</span></span>
<span class="line"><span style="color:#F78C6C;">503</span><span style="color:#EEFFFF;">　　</span><span style="color:#545454;font-style:italic;"># 用户id（0代表root、普通新建用户从500开始）</span></span>
<span class="line"><span style="color:#F78C6C;">504</span><span style="color:#EEFFFF;">　　</span><span style="color:#545454;font-style:italic;"># 所在组</span></span>
<span class="line"><span style="color:#82AAFF;">:</span><span style="color:#EEFFFF;">　　</span><span style="color:#545454;font-style:italic;"># 描述</span></span>
<span class="line"><span style="color:#FFCB6B;">/home/jack/</span><span style="color:#EEFFFF;">　　</span><span style="color:#545454;font-style:italic;"># 用户主目录</span></span>
<span class="line"><span style="color:#FFCB6B;">/bin/bash</span><span style="color:#EEFFFF;">　　</span><span style="color:#545454;font-style:italic;"># 用户缺省Shell</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>组信息文件分析</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">例如：jack:</span><span style="color:#EEFFFF;">$!</span><span style="color:#FFCB6B;">$</span><span style="color:#82AAFF;">:</span><span style="color:#FFCB6B;">???:13801:0:99999:7:*</span><span style="color:#82AAFF;">:</span><span style="color:#FFCB6B;">*</span><span style="color:#82AAFF;">:</span></span>
<span class="line"><span style="color:#FFCB6B;">jack</span><span style="color:#EEFFFF;">　　</span><span style="color:#545454;font-style:italic;"># 组名</span></span>
<span class="line"><span style="color:#EEFFFF;">$!</span><span style="color:#FFCB6B;">$</span><span style="color:#EEFFFF;">　　</span><span style="color:#545454;font-style:italic;"># 被加密的口令</span></span>
<span class="line"><span style="color:#F78C6C;">13801</span><span style="color:#EEFFFF;">　　</span><span style="color:#545454;font-style:italic;"># 创建日期与今天相隔的天数</span></span>
<span class="line"><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">　　</span><span style="color:#545454;font-style:italic;"># 口令最短位数</span></span>
<span class="line"><span style="color:#F78C6C;">99999</span><span style="color:#EEFFFF;">　　</span><span style="color:#545454;font-style:italic;"># 用户口令</span></span>
<span class="line"><span style="color:#F78C6C;">7</span><span style="color:#EEFFFF;">　　</span><span style="color:#545454;font-style:italic;"># 到7天时提醒</span></span>
<span class="line"><span style="color:#89DDFF;">*</span><span style="color:#EEFFFF;">　　</span><span style="color:#545454;font-style:italic;"># 禁用天数</span></span>
<span class="line"><span style="color:#89DDFF;">*</span><span style="color:#EEFFFF;">　　</span><span style="color:#545454;font-style:italic;"># 过期天数</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="实例" tabindex="-1">实例 <a class="header-anchor" href="#实例" aria-hidden="true">#</a></h3><p>如果是普通用户执行passwd只能修改自己的密码。如果新建用户后，要为新用户创建密码，则用passwd用户名，注意要以root用户的权限来创建。</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@localhost </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># passwd linuxde     </span><span style="color:#545454;font-style:italic;"># 更改或创建linuxde用户的密码；</span></span>
<span class="line"><span style="color:#FFCB6B;">Changing</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">password</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">for</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">user</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">linuxde.</span></span>
<span class="line"><span style="color:#FFCB6B;">New</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">UNIX</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">password:</span><span style="color:#EEFFFF;">           </span><span style="color:#545454;font-style:italic;"># 请输入新密码；</span></span>
<span class="line"><span style="color:#FFCB6B;">Retype</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">new</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">UNIX</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">password:</span><span style="color:#EEFFFF;">    </span><span style="color:#545454;font-style:italic;"># 再输入一次；</span></span>
<span class="line"><span style="color:#FFCB6B;">passwd:</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">all</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">authentication</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">tokens</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">updated</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">successfully.</span><span style="color:#EEFFFF;">  </span><span style="color:#545454;font-style:italic;"># 成功；</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>普通用户如果想更改自己的密码，直接运行passwd即可，比如当前操作的用户是linuxde。</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">linuxde@localhost </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;">$ passwd</span></span>
<span class="line"><span style="color:#FFCB6B;">Changing</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">password</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">for</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">user</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">linuxde.</span><span style="color:#EEFFFF;">  </span><span style="color:#545454;font-style:italic;"># 更改linuxde用户的密码；</span></span>
<span class="line"><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">current</span><span style="color:#89DDFF;">)</span><span style="color:#EEFFFF;"> UNIX password:    </span><span style="color:#545454;font-style:italic;"># 请输入当前密码；</span></span>
<span class="line"><span style="color:#FFCB6B;">New</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">UNIX</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">password:</span><span style="color:#EEFFFF;">          </span><span style="color:#545454;font-style:italic;"># 请输入新密码；</span></span>
<span class="line"><span style="color:#FFCB6B;">Retype</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">new</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">UNIX</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">password:</span><span style="color:#EEFFFF;">   </span><span style="color:#545454;font-style:italic;"># 确认新密码；</span></span>
<span class="line"><span style="color:#FFCB6B;">passwd:</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">all</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">authentication</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">tokens</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">updated</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">successfully.</span><span style="color:#EEFFFF;">  </span><span style="color:#545454;font-style:italic;"># 更改成功；</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>比如我们让某个用户不能修改密码，可以用<code>-l</code>选项来锁定：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@localhost </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># passwd -l linuxde     </span><span style="color:#545454;font-style:italic;"># 锁定用户linuxde不能更改密码；</span></span>
<span class="line"><span style="color:#FFCB6B;">Locking</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">password</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">for</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">user</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">linuxde.</span></span>
<span class="line"><span style="color:#FFCB6B;">passwd:</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">Success</span><span style="color:#EEFFFF;">            </span><span style="color:#545454;font-style:italic;"># 锁定成功；</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">linuxde@localhost </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># su linuxde    </span><span style="color:#545454;font-style:italic;"># 通过su切换到linuxde用户；</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">linuxde@localhost </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;">$ passwd       </span><span style="color:#545454;font-style:italic;"># linuxde来更改密码；</span></span>
<span class="line"><span style="color:#FFCB6B;">Changing</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">password</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">for</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">user</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">linuxde.</span></span>
<span class="line"><span style="color:#FFCB6B;">Changing</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">password</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">for</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">linuxde</span></span>
<span class="line"><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">current</span><span style="color:#89DDFF;">)</span><span style="color:#EEFFFF;"> UNIX password:           </span><span style="color:#545454;font-style:italic;"># 输入linuxde的当前密码；</span></span>
<span class="line"><span style="color:#FFCB6B;">passwd:</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">Authentication</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">token</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">manipulation</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">error</span><span style="color:#EEFFFF;">      </span><span style="color:#545454;font-style:italic;"># 失败，不能更改密码；</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>再来一例：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@localhost </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># passwd -d linuxde   </span><span style="color:#545454;font-style:italic;"># 清除linuxde用户密码；</span></span>
<span class="line"><span style="color:#FFCB6B;">Removing</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">password</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">for</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">user</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">linuxde.</span></span>
<span class="line"><span style="color:#FFCB6B;">passwd:</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">Success</span><span style="color:#EEFFFF;">                          </span><span style="color:#545454;font-style:italic;"># 清除成功；</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@localhost </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># passwd -S linuxde     </span><span style="color:#545454;font-style:italic;"># 查询linuxde用户密码状态；</span></span>
<span class="line"><span style="color:#FFCB6B;">Empty</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">password.</span><span style="color:#EEFFFF;">                          </span><span style="color:#545454;font-style:italic;"># 空密码，也就是没有密码；</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>注意：当我们清除一个用户的密码时，登录时就无需密码，这一点要加以注意。</p>`,30),o=[e];function r(c,t,F,i,y,d){return a(),n("div",null,o)}const b=s(p,[["render",r]]);export{u as __pageData,b as default};

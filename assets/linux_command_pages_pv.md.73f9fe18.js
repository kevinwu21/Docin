import{_ as s,c as n,o as a,a as l}from"./app.82736834.js";const D=JSON.parse('{"title":"pv","description":"","frontmatter":{},"headers":[{"level":2,"title":"补充说明","slug":"补充说明","link":"#补充说明","children":[]},{"level":2,"title":"下载安装","slug":"下载安装","link":"#下载安装","children":[{"level":3,"title":"语法","slug":"语法","link":"#语法","children":[]},{"level":3,"title":"选项","slug":"选项","link":"#选项","children":[]},{"level":3,"title":"实例","slug":"实例","link":"#实例","children":[]},{"level":3,"title":"注意","slug":"注意","link":"#注意","children":[]}]}],"relativePath":"linux/command/pages/pv.md","lastUpdated":1666509709000}'),p={name:"linux/command/pages/pv.md"},o=l(`<h1 id="pv" tabindex="-1">pv <a class="header-anchor" href="#pv" aria-hidden="true">#</a></h1><p>显示当前在命令行执行的命令的进度信息，管道查看器</p><h2 id="补充说明" tabindex="-1">补充说明 <a class="header-anchor" href="#补充说明" aria-hidden="true">#</a></h2><p><strong>pv命令</strong> Pipe Viewer 的简称，由Andrew Wood 开发。意思是通过管道显示数据处理进度的信息。这些信息包括已经耗费的时间，完成的百分比(通过进度条显示)，当前的速度，全部传输的数据，以及估计剩余的时间。</p><h2 id="下载安装" tabindex="-1">下载安装 <a class="header-anchor" href="#下载安装" aria-hidden="true">#</a></h2><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#545454;font-style:italic;"># Debian 系的操作系统，如 Ubuntu</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">apt-get</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">install</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">pv</span></span>
<span class="line"></span>
<span class="line"><span style="color:#545454;font-style:italic;"># RedHat系的则这样：</span></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">install</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">pv</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="语法" tabindex="-1">语法 <a class="header-anchor" href="#语法" aria-hidden="true">#</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">pv(选项</span><span style="color:#EEFFFF;">)</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">参数</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#FFCB6B;">pv</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">OPTION</span><span style="color:#89DDFF;">]</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">FILE</span><span style="color:#89DDFF;">]</span><span style="color:#EEFFFF;">...</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="选项" tabindex="-1">选项 <a class="header-anchor" href="#选项" aria-hidden="true">#</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">-p,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--progress</span><span style="color:#EEFFFF;">           </span><span style="color:#C3E88D;">显示进度条</span></span>
<span class="line"><span style="color:#FFCB6B;">-t,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--timer</span><span style="color:#EEFFFF;">              </span><span style="color:#C3E88D;">显示已用时间</span></span>
<span class="line"><span style="color:#FFCB6B;">-e,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--eta</span><span style="color:#EEFFFF;">                </span><span style="color:#C3E88D;">显示预计到达时间</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">完成</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#FFCB6B;">-I,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--fineta</span><span style="color:#EEFFFF;">             </span><span style="color:#C3E88D;">显示绝对估计到达时间</span></span>
<span class="line"><span style="color:#EEFFFF;">                         </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">完成</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#FFCB6B;">-r,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--rate</span><span style="color:#EEFFFF;">               </span><span style="color:#C3E88D;">显示数据传输速率计数器</span></span>
<span class="line"><span style="color:#FFCB6B;">-a,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--average-rate</span><span style="color:#EEFFFF;">       </span><span style="color:#C3E88D;">显示数据传输平均速率计数器</span></span>
<span class="line"><span style="color:#FFCB6B;">-b,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--bytes</span><span style="color:#EEFFFF;">              </span><span style="color:#C3E88D;">显示传输的字节数</span></span>
<span class="line"><span style="color:#FFCB6B;">-T,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--buffer-percent</span><span style="color:#EEFFFF;">     </span><span style="color:#C3E88D;">显示正在使用的传输缓冲区百分比</span></span>
<span class="line"><span style="color:#FFCB6B;">-A,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--last-written</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">NUM</span><span style="color:#EEFFFF;">   </span><span style="color:#C3E88D;">显示上次写入的字节数</span></span>
<span class="line"><span style="color:#FFCB6B;">-F,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--format</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">FORMAT</span><span style="color:#EEFFFF;">      </span><span style="color:#C3E88D;">将输出格式设置为FORMAT</span></span>
<span class="line"><span style="color:#FFCB6B;">-n,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--numeric</span><span style="color:#EEFFFF;">            </span><span style="color:#C3E88D;">输出百分比</span></span>
<span class="line"><span style="color:#FFCB6B;">-q,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--quiet</span><span style="color:#EEFFFF;">              </span><span style="color:#C3E88D;">不输出任何信息</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">-W,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--wait</span><span style="color:#EEFFFF;">               </span><span style="color:#C3E88D;">在传输第一个字节之前不显示任何内容</span></span>
<span class="line"><span style="color:#FFCB6B;">-D,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--delay-start</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">SEC</span><span style="color:#EEFFFF;">    </span><span style="color:#C3E88D;">在SEC秒过去之前不显示任何内容</span></span>
<span class="line"><span style="color:#FFCB6B;">-s,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--size</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">SIZE</span><span style="color:#EEFFFF;">          </span><span style="color:#C3E88D;">将估算的数据大小设置为SIZE字节</span></span>
<span class="line"><span style="color:#FFCB6B;">-l,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--line-mode</span><span style="color:#EEFFFF;">          </span><span style="color:#C3E88D;">计算行数而不是字节数</span><span style="color:#EEFFFF;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">-0,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--null</span><span style="color:#EEFFFF;">               </span><span style="color:#C3E88D;">行以零结尾</span></span>
<span class="line"><span style="color:#FFCB6B;">-i,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--interval</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">SEC</span><span style="color:#EEFFFF;">       </span><span style="color:#C3E88D;">每SEC秒更新一次</span></span>
<span class="line"><span style="color:#FFCB6B;">-w,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--width</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">WIDTH</span><span style="color:#EEFFFF;">        </span><span style="color:#C3E88D;">假设终端的宽度为WIDTH个字符</span><span style="color:#EEFFFF;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">-H,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--height</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">HEIGHT</span><span style="color:#EEFFFF;">      </span><span style="color:#C3E88D;">假设终端高度为HEIGHT行</span></span>
<span class="line"><span style="color:#FFCB6B;">-N,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--name</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">NAME</span><span style="color:#EEFFFF;">          </span><span style="color:#C3E88D;">在可视信息前面加上名称</span></span>
<span class="line"><span style="color:#FFCB6B;">-f,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--force</span><span style="color:#EEFFFF;">              </span><span style="color:#C3E88D;">将标准错误输出到终端</span></span>
<span class="line"><span style="color:#FFCB6B;">-c,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--cursor</span><span style="color:#EEFFFF;">             </span><span style="color:#C3E88D;">使用光标定位转义序列</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">-L,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--rate-limit</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">RATE</span><span style="color:#EEFFFF;">    </span><span style="color:#C3E88D;">将传输限制为每秒RATE字节</span></span>
<span class="line"><span style="color:#FFCB6B;">-B,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--buffer-size</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">BYTES</span><span style="color:#EEFFFF;">  </span><span style="color:#C3E88D;">使用BYTES的缓冲区大小</span></span>
<span class="line"><span style="color:#FFCB6B;">-C,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--no-splice</span><span style="color:#EEFFFF;">          </span><span style="color:#C3E88D;">从不使用splice</span><span style="color:#89DDFF;">()</span><span style="color:#C3E88D;">，始终使用读/写</span></span>
<span class="line"><span style="color:#FFCB6B;">-E,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--skip-errors</span><span style="color:#EEFFFF;">        </span><span style="color:#C3E88D;">跳过输入中的读取错误</span></span>
<span class="line"><span style="color:#FFCB6B;">-S,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--stop-at-size</span><span style="color:#EEFFFF;">       </span><span style="color:#C3E88D;">传输--size字节后停止</span></span>
<span class="line"><span style="color:#FFCB6B;">-R,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--remote</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">PID</span><span style="color:#EEFFFF;">         </span><span style="color:#C3E88D;">更新过程PID的设置</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">-P,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--pidfile</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">FILE</span><span style="color:#EEFFFF;">       </span><span style="color:#C3E88D;">将进程ID保存在FILE中</span><span style="color:#EEFFFF;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">-d,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--watchfd</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">PID[:FD]</span><span style="color:#EEFFFF;">   </span><span style="color:#C3E88D;">监视进程PID,打开的文件FD</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">-h,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--help</span><span style="color:#EEFFFF;">               </span><span style="color:#C3E88D;">显示帮助</span></span>
<span class="line"><span style="color:#FFCB6B;">-V,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--version</span><span style="color:#EEFFFF;">            </span><span style="color:#C3E88D;">显示版本信息</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h3 id="实例" tabindex="-1">实例 <a class="header-anchor" href="#实例" aria-hidden="true">#</a></h3><p>我们（在 linux 上使用命令行的用户）的大多数使用场景都会用到的命令是从一个 USB 驱动器拷贝电影文件到你的电脑。如果你使用 cp 来完成上面的任务，你会什么情况都不清楚，直到整个复制过程结束或者出错。</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#545454;font-style:italic;"># 复制文件会有进度</span></span>
<span class="line"><span style="color:#FFCB6B;">linux</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">master●</span><span style="color:#89DDFF;">]</span><span style="color:#EEFFFF;"> % </span><span style="color:#C3E88D;">pv</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">~/Downloads/CentOS-</span><span style="color:#F78C6C;">7</span><span style="color:#C3E88D;">-x86_64-Minimal-1511.iso</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">~/Desktop/CentOS-</span><span style="color:#F78C6C;">7</span><span style="color:#C3E88D;">-x86_64-Minimal-1511.iso</span></span>
<span class="line"><span style="color:#545454;font-style:italic;"># 下面输入信息</span></span>
<span class="line"><span style="color:#EEFFFF;">552MiB </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">:</span><span style="color:#F78C6C;">00</span><span style="color:#EEFFFF;">:</span><span style="color:#F78C6C;">02</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;"> 212MiB/s</span><span style="color:#89DDFF;">]</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">[==================&gt;</span><span style="color:#EEFFFF;">           </span><span style="color:#89DDFF;">]</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">91</span><span style="color:#EEFFFF;">% ETA </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">:</span><span style="color:#F78C6C;">00</span><span style="color:#EEFFFF;">:</span><span style="color:#F78C6C;">00</span></span>
<span class="line"></span>
<span class="line"><span style="color:#545454;font-style:italic;"># -L 可以让你修改 pv 命令的传输速率。</span></span>
<span class="line"><span style="color:#545454;font-style:italic;"># 使用 -L 选项来限制传输速率为2MB/s。</span></span>
<span class="line"><span style="color:#FFCB6B;">pv</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-L</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">2m</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/media/himanshu/1AC2-A8E3/fNf.mkv</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">./Desktop/fnf.mkv</span><span style="color:#EEFFFF;"> </span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>复制文件时显示进度条（如果没有指定选项，默认使用 -p, -t, -e, -r 和 -b 选项）</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">pv</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">getiot.db</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">getiot.db.bak</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>将 <code>/var/log/syslog</code> 文件打包成 zip 压缩包，并显示进度</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">pv</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/var/log/syslog</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">|</span><span style="color:#EEFFFF;"> </span><span style="color:#FFCB6B;">zip</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">syslog.zip</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>使用 tar 命令解压缩时显示进度条</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">pv</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">rootfs.tar.bz2</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">|</span><span style="color:#EEFFFF;"> </span><span style="color:#FFCB6B;">tar</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-jxf</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-C</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">rootfs/</span></span>
<span class="line"><span style="color:#EEFFFF;">12.3MiB </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">:</span><span style="color:#F78C6C;">00</span><span style="color:#EEFFFF;">:</span><span style="color:#F78C6C;">02</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">6.15MiB/s</span><span style="color:#89DDFF;">]</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">[=========&gt;</span><span style="color:#EEFFFF;">                                     </span><span style="color:#89DDFF;">]</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">21</span><span style="color:#EEFFFF;">% ETA </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">:</span><span style="color:#F78C6C;">00</span><span style="color:#EEFFFF;">:</span><span style="color:#F78C6C;">07</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>解压完成</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">pv</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">rootfs.tar.bz2</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">|</span><span style="color:#EEFFFF;"> </span><span style="color:#FFCB6B;">tar</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-jxf</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-C</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">rootfs/</span></span>
<span class="line"><span style="color:#EEFFFF;">57.8MiB </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">:</span><span style="color:#F78C6C;">00</span><span style="color:#EEFFFF;">:</span><span style="color:#F78C6C;">10</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">5.53MiB/s</span><span style="color:#89DDFF;">]</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">[==============================================&gt;]</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">100</span><span style="color:#EEFFFF;">%</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>字符一个个匀速在命令行中显示出来</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Tecmint[dot]com is a community of Linux Nerds and Geeks</span><span style="color:#89DDFF;">&quot;</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">|</span><span style="color:#EEFFFF;"> </span><span style="color:#FFCB6B;">pv</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-qL</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">10</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>压缩文件展示进度信息</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">pv</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/media/himanshu/1AC2-A8E3/fnf.mkv</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">|</span><span style="color:#EEFFFF;"> </span><span style="color:#FFCB6B;">gzip</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">./Desktop/fnf.log.gz</span><span style="color:#EEFFFF;"> </span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>用 dd 命令将 iso 写入磁盘，pv来实现进度条的显示</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">pv</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-cN</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">source</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/Users/kacperwang/Downloads/CentOS-</span><span style="color:#F78C6C;">7</span><span style="color:#C3E88D;">-x86_64-Everything-1511.iso</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">|</span><span style="color:#EEFFFF;"> </span><span style="color:#FFCB6B;">sudo</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">dd</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">of=/dev/disk2</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">bs=4m</span></span>
<span class="line"><span style="color:#545454;font-style:italic;">## 显示下面进度</span></span>
<span class="line"><span style="color:#82AAFF;">source</span><span style="color:#FFCB6B;">:</span><span style="color:#EEFFFF;">  </span><span style="color:#C3E88D;">5.2GiB</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">5</span><span style="color:#C3E88D;">:</span><span style="color:#F78C6C;">11</span><span style="color:#C3E88D;">:</span><span style="color:#F78C6C;">41</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;"> 503KiB/s</span><span style="color:#89DDFF;">]</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">[=====================&gt;</span><span style="color:#EEFFFF;">       </span><span style="color:#89DDFF;">]</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">71</span><span style="color:#C3E88D;">%</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">ETA</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">2</span><span style="color:#C3E88D;">:</span><span style="color:#F78C6C;">01</span><span style="color:#C3E88D;">:</span><span style="color:#F78C6C;">56</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>在linux上, 如果执行的一些命令或者一些脚本需要花费很长时间, 但又不能拿出更多的精力反复盯着有没有执行结束, 这时候可以用pv监听PID, 任务完成后通过网络通知到微信或者钉钉, 这样就可以腾出来精力做其他的事, 是不是很棒</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">pv</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-d</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">ps</span><span style="color:#C3E88D;"> -ef </span><span style="color:#89DDFF;">|</span><span style="color:#C3E88D;"> </span><span style="color:#FFCB6B;">grep</span><span style="color:#C3E88D;"> -v grep </span><span style="color:#89DDFF;">|</span><span style="color:#C3E88D;"> </span><span style="color:#FFCB6B;">grep</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&lt;脚本或命令的关键字&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">|</span><span style="color:#C3E88D;"> </span><span style="color:#FFCB6B;">awk</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">{print $2}</span><span style="color:#89DDFF;">&#39;)</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">这里执行发通知脚本或者命令,脚本或命令需要提前调试好&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="注意" tabindex="-1">注意 <a class="header-anchor" href="#注意" aria-hidden="true">#</a></h3><ol><li>选项&quot;-d, --watchfd PID[:FD]&quot;, 是在1.6.6版本中才有的参数,如果使用需要<code>pv</code>升级到大于等于1.6.6的版本</li><li>CentOS7的Yum仓库里<code>pv</code>最新的是1.4.6版本,1.6.6版本是发布在CentOS8里面的,如果需要,可以将CentOS8里的pv下载到本地电脑上或者本地的Yum私服里, 这个是<a href="http://www.rpmfind.net/linux/rpm2html/search.php?query=pv&amp;submit=Search+...&amp;system=EPEL&amp;arch=" target="_blank" rel="noreferrer">下载地址</a>, 可以根据自己不同的架构下载, 1.6.6的安装: <code>rpm -ivh pv-1.6.6-7.el8.x86_64.rpm -U</code></li></ol>`,31),e=[o];function F(r,c,t,E,y,i){return a(),n("div",null,e)}const d=s(p,[["render",F]]);export{D as __pageData,d as default};

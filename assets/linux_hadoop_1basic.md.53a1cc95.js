import{_ as s,c as n,o as a,a as l}from"./app.82736834.js";const u=JSON.parse('{"title":"Hadoop 环境搭建","description":"","frontmatter":{},"headers":[{"level":2,"title":"虚拟机网络配置","slug":"虚拟机网络配置","link":"#虚拟机网络配置","children":[{"level":3,"title":"windows 中配置虚拟网卡","slug":"windows-中配置虚拟网卡","link":"#windows-中配置虚拟网卡","children":[]},{"level":3,"title":"VMware 虚拟机网络配置","slug":"vmware-虚拟机网络配置","link":"#vmware-虚拟机网络配置","children":[]},{"level":3,"title":"CentOS 配置","slug":"centos-配置","link":"#centos-配置","children":[]}]},{"level":2,"title":"设置静态 IP","slug":"设置静态-ip","link":"#设置静态-ip","children":[{"level":3,"title":"编辑网络配置文件","slug":"编辑网络配置文件","link":"#编辑网络配置文件","children":[]},{"level":3,"title":"重启网络","slug":"重启网络","link":"#重启网络","children":[]},{"level":3,"title":"测试静态 IP 是否设置成功","slug":"测试静态-ip-是否设置成功","link":"#测试静态-ip-是否设置成功","children":[]}]},{"level":2,"title":"关闭防火墙","slug":"关闭防火墙","link":"#关闭防火墙","children":[]},{"level":2,"title":"关闭selinux","slug":"关闭selinux","link":"#关闭selinux","children":[]},{"level":2,"title":"配置 hadoop 用户","slug":"配置-hadoop-用户","link":"#配置-hadoop-用户","children":[]},{"level":2,"title":"安装必要的软件","slug":"安装必要的软件","link":"#安装必要的软件","children":[]},{"level":2,"title":"时钟同步","slug":"时钟同步","link":"#时钟同步","children":[]},{"level":2,"title":"安装 JDK1.8","slug":"安装-jdk1-8","link":"#安装-jdk1-8","children":[{"level":3,"title":"切换到hadoop用户","slug":"切换到hadoop用户","link":"#切换到hadoop用户","children":[]},{"level":3,"title":"下载 JDK1.8","slug":"下载-jdk1-8","link":"#下载-jdk1-8","children":[]},{"level":3,"title":"通过 ftp 工具上传到 Linux","slug":"通过-ftp-工具上传到-linux","link":"#通过-ftp-工具上传到-linux","children":[]},{"level":3,"title":"解压 JDK","slug":"解压-jdk","link":"#解压-jdk","children":[]},{"level":3,"title":"配置环境变量","slug":"配置环境变量","link":"#配置环境变量","children":[]},{"level":3,"title":"使得环境变量生效","slug":"使得环境变量生效","link":"#使得环境变量生效","children":[]},{"level":3,"title":"查看 JDK 是否安装成功","slug":"查看-jdk-是否安装成功","link":"#查看-jdk-是否安装成功","children":[]}]},{"level":2,"title":"拍摄快照","slug":"拍摄快照","link":"#拍摄快照","children":[]},{"level":2,"title":"克隆虚拟机","slug":"克隆虚拟机","link":"#克隆虚拟机","children":[{"level":3,"title":"克隆四台虚拟机","slug":"克隆四台虚拟机","link":"#克隆四台虚拟机","children":[]},{"level":3,"title":"配置克隆虚拟机 IP","slug":"配置克隆虚拟机-ip","link":"#配置克隆虚拟机-ip","children":[]},{"level":3,"title":"配置克隆虚拟机主机名","slug":"配置克隆虚拟机主机名","link":"#配置克隆虚拟机主机名","children":[]},{"level":3,"title":"设置 IP 与主机名映射","slug":"设置-ip-与主机名映射","link":"#设置-ip-与主机名映射","children":[]},{"level":3,"title":"配置 windows 连接虚拟机的映射","slug":"配置-windows-连接虚拟机的映射","link":"#配置-windows-连接虚拟机的映射","children":[]},{"level":3,"title":"配置ssh免密登录","slug":"配置ssh免密登录","link":"#配置ssh免密登录","children":[]}]}],"relativePath":"linux/hadoop/1basic.md","lastUpdated":1666176966000}'),e={name:"linux/hadoop/1basic.md"},p=l(`<h1 id="hadoop-环境搭建" tabindex="-1">Hadoop 环境搭建 <a class="header-anchor" href="#hadoop-环境搭建" aria-hidden="true">#</a></h1><p><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk/Hadooplogo.svg" alt="Hadooplogo"></p><h2 id="虚拟机网络配置" tabindex="-1">虚拟机网络配置 <a class="header-anchor" href="#虚拟机网络配置" aria-hidden="true">#</a></h2><h3 id="windows-中配置虚拟网卡" tabindex="-1">windows 中配置虚拟网卡 <a class="header-anchor" href="#windows-中配置虚拟网卡" aria-hidden="true">#</a></h3><p><strong>控制面板 --&gt; 所有控制面板项 --&gt; 网络连接--&gt;VMware Virtual Ethernet Adapter for VMnet8</strong></p><p><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk/hadoop1.jpg" alt="hadoop1"></p><p><strong>设置 VMware Virtual Ethernet Adapter for VMnet8 的属性</strong></p><p><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk/hadoop2.jpg" alt="hadoop2"></p><h3 id="vmware-虚拟机网络配置" tabindex="-1">VMware 虚拟机网络配置 <a class="header-anchor" href="#vmware-虚拟机网络配置" aria-hidden="true">#</a></h3><p><strong>VMware 打开“编辑 --&gt; 虚拟机网络编辑器”</strong></p><p><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk/hadoop3.jpg" alt="hadoop3"></p><p><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk/hadoop4.jpg" alt="hadoop4"></p><h3 id="centos-配置" tabindex="-1">CentOS 配置 <a class="header-anchor" href="#centos-配置" aria-hidden="true">#</a></h3><p>登录CentOS使用&quot;ip addr&quot;命令查看一下IP，运行效果如下:</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">ip</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">addr</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk/hadoop5.jpg" alt="hadoop5"></p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>使用“ip addr”命令查看到系统IP后，就可以通过 Xshell、SecureCRT、Royal TSX 这类客户端连接我们安装的 CentOS</p></div><h2 id="设置静态-ip" tabindex="-1">设置静态 IP <a class="header-anchor" href="#设置静态-ip" aria-hidden="true">#</a></h2><p>安装的时候，我们设置的是网络采取的是“dhcp”网络配置方式，这种方式IP是动态设置的，这个在我们以后的集群里面是不行的，所以我们设置成静态ip，具体的步骤如下:</p><h3 id="编辑网络配置文件" tabindex="-1">编辑网络配置文件 <a class="header-anchor" href="#编辑网络配置文件" aria-hidden="true">#</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#545454;font-style:italic;"># 进入网络配置目录</span></span>
<span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/etc/sysconfig/network-scripts/</span></span>
<span class="line"><span style="color:#545454;font-style:italic;"># 查看网络配置文件</span></span>
<span class="line"><span style="color:#FFCB6B;">ls</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-al</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk/hadoop6.jpg" alt="hadoop6"></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#545454;font-style:italic;"># 编辑网络配置文件</span></span>
<span class="line"><span style="color:#FFCB6B;">vi</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">+</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/etc/sysconfig/network-scripts/ifcfg-ens33</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>修改的时候请使用 ROOT 用户登录。</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#EEFFFF;">TYPE</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Ethernet</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#EEFFFF;">PROXY_METHOD</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">none</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#EEFFFF;">BROWSER_ONLY</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">no</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#545454;font-style:italic;"># 注意这个要注释或者删除</span></span>
<span class="line"><span style="color:#545454;font-style:italic;"># BOOTPROTO=&quot;dhcp&quot;</span></span>
<span class="line"><span style="color:#EEFFFF;">DEFROUTE</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">yes</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#EEFFFF;">IPV4_FAILURE_FATAL</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">no</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#EEFFFF;">IPV6INIT</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">yes</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#EEFFFF;">IPV6_AUTOCONF</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">yes</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#EEFFFF;">IPV6_DEFROUTE</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">yes</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#EEFFFF;">IPV6_FAILURE_FATAL</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">no</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#EEFFFF;">IPV6_ADDR_GEN_MODE</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">stable-privacy</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#EEFFFF;">NAME</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ens33</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#EEFFFF;">UUID</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">e9ce67e1-7d2a-41b4-9989-dfbc75278d80</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#EEFFFF;">DEVICE</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ens33</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#EEFFFF;">ONBOOT</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">yes</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#EEFFFF;">IPV6_PRIVACY</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">no</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#545454;font-style:italic;"># 配置静态的IP:60网段</span></span>
<span class="line"><span style="color:#EEFFFF;">BOOTPROTO</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">static</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#EEFFFF;">IPADDR</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">192.168.60.100</span><span style="color:#EEFFFF;"> </span><span style="color:#545454;font-style:italic;"># 此处60根据自己配置的网段来配置</span></span>
<span class="line"><span style="color:#EEFFFF;">NETMASK</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">255.255.255.0</span></span>
<span class="line"><span style="color:#EEFFFF;">GATEWAY</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">192.168.60.1</span></span>
<span class="line"><span style="color:#EEFFFF;">DNS1</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">8.8.8.8</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk/hadoop7.jpg" alt="hadoop7"></p><h3 id="重启网络" tabindex="-1">重启网络 <a class="header-anchor" href="#重启网络" aria-hidden="true">#</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#545454;font-style:italic;"># 重启网络</span></span>
<span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">restart</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">network</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="测试静态-ip-是否设置成功" tabindex="-1">测试静态 IP 是否设置成功 <a class="header-anchor" href="#测试静态-ip-是否设置成功" aria-hidden="true">#</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#545454;font-style:italic;"># 检查IP地址是否与自己配置的静态IP一致</span></span>
<span class="line"><span style="color:#FFCB6B;">ip</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">addr</span></span>
<span class="line"><span style="color:#545454;font-style:italic;"># 检查外网能否正常访问</span></span>
<span class="line"><span style="color:#FFCB6B;">ping</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">baidu.com</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="关闭防火墙" tabindex="-1">关闭防火墙 <a class="header-anchor" href="#关闭防火墙" aria-hidden="true">#</a></h2><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#545454;font-style:italic;"># 查看防火墙的信息</span></span>
<span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">status</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">firewalld</span></span>
<span class="line"></span>
<span class="line"><span style="color:#545454;font-style:italic;"># 关闭防火墙:下次启动还会启动防火墙</span></span>
<span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">stop</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">firewalld</span></span>
<span class="line"></span>
<span class="line"><span style="color:#545454;font-style:italic;"># 设置防火墙不随着系统的启动而启动</span></span>
<span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">disable</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">firewalld</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>效果:</strong></p><p><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk/hadoop8.jpg" alt="hadoop8"></p><h2 id="关闭selinux" tabindex="-1">关闭selinux <a class="header-anchor" href="#关闭selinux" aria-hidden="true">#</a></h2><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">vi</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/etc/sysconfig/selinux</span></span>
<span class="line"><span style="color:#545454;font-style:italic;"># 或者</span></span>
<span class="line"><span style="color:#FFCB6B;">vi</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/etc/selinux/config</span></span>
<span class="line"></span>
<span class="line"><span style="color:#545454;font-style:italic;"># 把值由“enforcing”改成“disabled”</span></span>
<span class="line"><span style="color:#EEFFFF;">SELINUX</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">disabled</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk/hadoop9.jpg" alt="hadoop9"></p><h2 id="配置-hadoop-用户" tabindex="-1">配置 hadoop 用户 <a class="header-anchor" href="#配置-hadoop-用户" aria-hidden="true">#</a></h2><blockquote><p>安装系统的时候创建了一个名叫“hadoop”的用户，如果没用创建该用户，可以通过下面的方式创建</p></blockquote><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#545454;font-style:italic;"># 创建用户hadoop，指定它的工作目录</span></span>
<span class="line"><span style="color:#FFCB6B;">useradd</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-d</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/home/hadoop</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">hadoop</span></span>
<span class="line"><span style="color:#545454;font-style:italic;"># 分配密码</span></span>
<span class="line"><span style="color:#FFCB6B;">passwd</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">hadoop</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>如果是使用命令创建的用户，需要给 hadoop 用户分配管理员权限</strong></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">visudo</span></span>
<span class="line"><span style="color:#545454;font-style:italic;"># 第100行</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk/hadoop10.jpg" alt="hadoop10"></p><h2 id="安装必要的软件" tabindex="-1">安装必要的软件 <a class="header-anchor" href="#安装必要的软件" aria-hidden="true">#</a></h2><p>由于我们装的CentOS是精简版本，导致很多必要的软件没用安装，比如:vim、net-tools、 wget、ntpdate、jdk8，我们就先安装这几个软件。</p><p><strong>介绍</strong></p><table><thead><tr><th>软件</th><th>介绍</th></tr></thead><tbody><tr><td>vim</td><td>Vim是从 vi 发展出来的一个文本编辑器</td></tr><tr><td>net- tools</td><td>net-tools是一个软件工具包，包括route，ifconfig等命令</td></tr><tr><td>wget</td><td>wget是一个下载文件的工具，它用在命令行下。对于Linux用户是必不 可少的工具</td></tr><tr><td>ntpdate</td><td>时间同步工具</td></tr><tr><td>bzip2</td><td>bzip2压缩格式</td></tr><tr><td>psmisc</td><td>fuser命令</td></tr><tr><td>telnet</td><td>安装telnet</td></tr></tbody></table><p><strong>安装</strong></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#545454;font-style:italic;"># 安装 vim</span></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">install</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">vim</span></span>
<span class="line"></span>
<span class="line"><span style="color:#545454;font-style:italic;"># 安装 net-tools</span></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">install</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">net-tools</span></span>
<span class="line"></span>
<span class="line"><span style="color:#545454;font-style:italic;"># 安装 wget</span></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">install</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">wget</span></span>
<span class="line"></span>
<span class="line"><span style="color:#545454;font-style:italic;"># 安装 ntpdate</span></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">install</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">ntpdate</span></span>
<span class="line"></span>
<span class="line"><span style="color:#545454;font-style:italic;"># 安装 openssl-devel</span></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">install</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">openssl-devel</span></span>
<span class="line"></span>
<span class="line"><span style="color:#545454;font-style:italic;"># 安装 bzip2</span></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">install</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">bzip2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#545454;font-style:italic;"># fuser 属于 psmisc这个包</span></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">install</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">psmisc</span></span>
<span class="line"></span>
<span class="line"><span style="color:#545454;font-style:italic;"># 安装 telnet</span></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">install</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">telnet</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">telnet-server</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="时钟同步" tabindex="-1">时钟同步 <a class="header-anchor" href="#时钟同步" aria-hidden="true">#</a></h2><p>下面完成时钟同步，我们以root用户登录虚拟机，然后完成如下配置:</p><p><strong>安装并启动 ntpdate</strong></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#545454;font-style:italic;"># 安装 ntpdate</span></span>
<span class="line"><span style="color:#FFCB6B;">ntpdate</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">yum</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">install</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">ntpdate</span></span>
<span class="line"></span>
<span class="line"><span style="color:#545454;font-style:italic;"># 设置 ntpdate 随机启动</span></span>
<span class="line"><span style="color:#545454;font-style:italic;"># systemctl disable ntpdate</span></span>
<span class="line"><span style="color:#545454;font-style:italic;"># 将 disable 改为 enable</span></span>
<span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">enable</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">ntpdate</span></span>
<span class="line"></span>
<span class="line"><span style="color:#545454;font-style:italic;"># 运行 ntpdate</span></span>
<span class="line"><span style="color:#FFCB6B;">ntpdate</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">ntp4.aliyun.com</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>给四台机器设置定时任务</strong></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#545454;font-style:italic;"># 编辑定时任务</span></span>
<span class="line"><span style="color:#FFCB6B;">crontab</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-e</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>添加下面一行</strong></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#545454;font-style:italic;"># 表示每分钟执行一次时钟同步。</span></span>
<span class="line"><span style="color:#89DDFF;">*</span><span style="color:#EEFFFF;">/</span><span style="color:#F78C6C;">1</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">*</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">*</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">*</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">*</span><span style="color:#EEFFFF;"> /usr/sbin/ntpdate ntp4.aliyun.com</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>演示：</strong></p><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk/hadoop11.jpg" alt="hadoop11" style="zoom:50%;"><br><div class="tip custom-block"><p class="custom-block-title">达到的效果</p><p>会每分钟去同步一下集群的时间</p></div><h2 id="安装-jdk1-8" tabindex="-1">安装 JDK1.8 <a class="header-anchor" href="#安装-jdk1-8" aria-hidden="true">#</a></h2><h3 id="切换到hadoop用户" tabindex="-1"><strong>切换到hadoop用户</strong> <a class="header-anchor" href="#切换到hadoop用户" aria-hidden="true">#</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">su</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">hadoop</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="下载-jdk1-8" tabindex="-1">下载 JDK1.8 <a class="header-anchor" href="#下载-jdk1-8" aria-hidden="true">#</a></h3><p>123网盘：<a href="https://www.123pan.com/s/zCYKVv-2JXR" target="_blank" rel="noreferrer">jdk1.8-8u281</a>（推荐）</p><p>官网地址：<a href="https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html" target="_blank" rel="noreferrer">https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html</a></p><p><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk%2Fhadoop12.jpg" alt="hadoop12"></p><h3 id="通过-ftp-工具上传到-linux" tabindex="-1">通过 ftp 工具上传到 Linux <a class="header-anchor" href="#通过-ftp-工具上传到-linux" aria-hidden="true">#</a></h3><p><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk/hadoop13.jpg" alt="hadoop13"></p><h3 id="解压-jdk" tabindex="-1">解压 JDK <a class="header-anchor" href="#解压-jdk" aria-hidden="true">#</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">tar</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-xvf</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">jdk-8u281-linux-x64.tar.gz</span></span>
<span class="line"><span style="color:#545454;font-style:italic;"># 此处 8u281 为 jdk 版本号，需要根据实际情况更改</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="配置环境变量" tabindex="-1">配置环境变量 <a class="header-anchor" href="#配置环境变量" aria-hidden="true">#</a></h3><p><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk/hadoop14.jpg" alt="hadoop14"></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#545454;font-style:italic;"># 配置当前用户的环境变量</span></span>
<span class="line"><span style="color:#FFCB6B;">vi</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">.bash_profile</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk/hadoop15.jpg" alt="hadoop15"></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#545454;font-style:italic;"># .bash_profile</span></span>
<span class="line"><span style="color:#545454;font-style:italic;"># Get the aliases and functions</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">-f</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">~</span><span style="color:#EEFFFF;">/.bashrc </span><span style="color:#89DDFF;">];</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;font-style:italic;">then</span></span>
<span class="line"><span style="color:#82AAFF;">.</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">~/.bashrc</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">fi</span></span>
<span class="line"></span>
<span class="line"><span style="color:#545454;font-style:italic;"># JAVA_HOME 指定jdk的路径，也就是刚刚解压的路径</span></span>
<span class="line"><span style="color:#C792EA;">export</span><span style="color:#EEFFFF;"> JAVA_HOME</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">/home/hadoop/jdk1.8.0_281</span></span>
<span class="line"></span>
<span class="line"><span style="color:#545454;font-style:italic;"># 指定classpath</span></span>
<span class="line"><span style="color:#C792EA;">export</span><span style="color:#EEFFFF;"> CLASSPATH</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">.:</span><span style="color:#EEFFFF;">$JAVA_HOME</span><span style="color:#C3E88D;">/lib/tools.jar:</span><span style="color:#EEFFFF;">$JAVA_HOME</span><span style="color:#C3E88D;">/lib/dt.jar:</span><span style="color:#EEFFFF;">$JAVA_HOME</span><span style="color:#C3E88D;">/lib</span></span>
<span class="line"></span>
<span class="line"><span style="color:#545454;font-style:italic;"># 要把jdk的bin目录加入到path环境变量里面去。</span></span>
<span class="line"><span style="color:#C792EA;">export</span><span style="color:#EEFFFF;"> PATH</span><span style="color:#89DDFF;">=</span><span style="color:#EEFFFF;">$PATH</span><span style="color:#C3E88D;">:</span><span style="color:#EEFFFF;">$JAVA_HOME</span><span style="color:#C3E88D;">/bin</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="使得环境变量生效" tabindex="-1">使得环境变量生效 <a class="header-anchor" href="#使得环境变量生效" aria-hidden="true">#</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#82AAFF;">source</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">.bash_profile</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="查看-jdk-是否安装成功" tabindex="-1">查看 JDK 是否安装成功 <a class="header-anchor" href="#查看-jdk-是否安装成功" aria-hidden="true">#</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">java</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-version</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk/hadoop16.jpg" alt="hadoop16"></p><h2 id="拍摄快照" tabindex="-1">拍摄快照 <a class="header-anchor" href="#拍摄快照" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>在 VMware 中拍摄快照，起到备份的作用，以便后续出现问题时可以回退到当前状态</p></div><p><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk/hadoop17.jpg" alt="hadoop17"></p><h2 id="克隆虚拟机" tabindex="-1">克隆虚拟机 <a class="header-anchor" href="#克隆虚拟机" aria-hidden="true">#</a></h2><p>上面完成了CentOS虚拟机的配置包括网络配置，然后拍了快照，下面就就可以进行虚拟机的克隆了，由于我们后面使用的是hadoop的集群，如果一个一个虚拟机的安装会比较麻烦，还可以出错，这时候我们通过一个虚拟机的克隆就可以轻松的完成这项任务。</p><h3 id="克隆四台虚拟机" tabindex="-1">克隆四台虚拟机 <a class="header-anchor" href="#克隆四台虚拟机" aria-hidden="true">#</a></h3><p><strong>克隆: node01，node02，node03，node04</strong></p><p><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk/hadoop18.jpg" alt="hadoop18"></p><p><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk/hadoop19.jpg" alt="hadoop19"></p><p><strong>分别克隆四次虚拟机</strong></p><p><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk/hadoop20.jpg" alt="hadoop20"></p><h3 id="配置克隆虚拟机-ip" tabindex="-1">配置克隆虚拟机 IP <a class="header-anchor" href="#配置克隆虚拟机-ip" aria-hidden="true">#</a></h3><p>由于配置了静态IP，这里克隆以后会导致IP一样，我们需要修改一下IP，具体修改如下</p><p>同时也设置一下主机名。</p><table><thead><tr><th>主机名</th><th>IP</th></tr></thead><tbody><tr><td>node01</td><td>192.168.60.101</td></tr><tr><td>node02</td><td>192.168.60.102</td></tr><tr><td>node03</td><td>192.168.60.103</td></tr><tr><td>node04</td><td>192.168.60.104</td></tr></tbody></table><div class="warning custom-block"><p class="custom-block-title">注意:</p><p>这里是配置的是60网段，这个网段可以根据自己虚拟机的实际情况来设定，不一定是60</p></div><p><strong>分别对四台机器修改 IP：</strong></p><h4 id="_192-168-60-101" tabindex="-1">192.168.60.101 <a class="header-anchor" href="#_192-168-60-101" aria-hidden="true">#</a></h4><p><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk/hadoop21.jpg" alt="hadoop21"></p><h4 id="_192-168-60-102" tabindex="-1">192.168.60.102 <a class="header-anchor" href="#_192-168-60-102" aria-hidden="true">#</a></h4><p><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk/hadoop22.jpg" alt="hadoop22"></p><h4 id="_192-168-60-103" tabindex="-1">192.168.60.103 <a class="header-anchor" href="#_192-168-60-103" aria-hidden="true">#</a></h4><p><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk/hadoop23.jpg" alt="hadoop23"></p><h4 id="_192-168-60-104" tabindex="-1">192.168.60.104 <a class="header-anchor" href="#_192-168-60-104" aria-hidden="true">#</a></h4><p><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk/hadoop24.jpg" alt="hadoop24"></p><h3 id="配置克隆虚拟机主机名" tabindex="-1">配置克隆虚拟机主机名 <a class="header-anchor" href="#配置克隆虚拟机主机名" aria-hidden="true">#</a></h3><blockquote><p>配置主机名可以修改 <strong>/etc/hostname</strong> 文件(一般使用这样)，或者通过“<strong>hostnamectl set- hostname</strong>”命令。</p></blockquote><p><strong>配置之前，先切回 root 用户</strong></p><p><strong>把192.168.60.101设置成node01:</strong></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">hostnamectl</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">set-hostname</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">node01</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>把192.168.60.102设置成node02:</strong></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">hostnamectl</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">set-hostname</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">node02</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>把192.168.60.103设置成node03:</strong></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">hostnamectl</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">set-hostname</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">node03</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>把192.168.60.104设置成node04:</strong></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">hostnamectl</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">set-hostname</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">node04</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="设置-ip-与主机名映射" tabindex="-1">设置 IP 与主机名映射 <a class="header-anchor" href="#设置-ip-与主机名映射" aria-hidden="true">#</a></h3><p><strong>我们设置一下IP地址与主机名的映射关系，也就是以后可以通过主机名来相互访问</strong></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">vi</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/etc/hosts</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>把下面的IP与主机映射内容追加到 /etc/hosts 文件</strong></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#EEFFFF;">192.168.60.101 node01</span></span>
<span class="line"><span style="color:#EEFFFF;">192.168.60.102 node02</span></span>
<span class="line"><span style="color:#EEFFFF;">192.168.60.103 node03</span></span>
<span class="line"><span style="color:#EEFFFF;">192.168.60.104 node04</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>修改配置文件</strong></p><p><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk/hadoop25.jpg" alt="hadoop25"></p><p><strong>达到的效果</strong></p><p><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk/hadoop26.jpg" alt="hadoop26"></p><p>达到可以通过 ssh node01，而不是ssh 192.168.60.101这种方式登录系统。</p><div class="warning custom-block"><p class="custom-block-title">注意:</p><p>修改主机名以后，最好重新系统，保证修改的配置生效</p></div><h3 id="配置-windows-连接虚拟机的映射" tabindex="-1">配置 windows 连接虚拟机的映射 <a class="header-anchor" href="#配置-windows-连接虚拟机的映射" aria-hidden="true">#</a></h3><blockquote><p>C:\\Windows\\System32\\drivers\\etc\\hosts</p></blockquote><div class="warning custom-block"><p class="custom-block-title">注意:</p><p>需要以管理员的权限来打开这个文件，然后再编辑。</p></div><p>添加以下字段</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#545454;font-style:italic;"># hadoop集群</span></span>
<span class="line"><span style="color:#EEFFFF;">192.168.60.101 node01</span></span>
<span class="line"><span style="color:#EEFFFF;">192.168.60.102 node02</span></span>
<span class="line"><span style="color:#EEFFFF;">192.168.60.103 node03</span></span>
<span class="line"><span style="color:#EEFFFF;">192.168.60.104 node04</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk/hadoop27.jpg" alt="hadoop27"></p><h3 id="配置ssh免密登录" tabindex="-1">配置ssh免密登录 <a class="header-anchor" href="#配置ssh免密登录" aria-hidden="true">#</a></h3><p>上面设置完主机名与IP名映射以后，可以通过主机名代替IP，但是ssh登录得时候需要输入密 码，如果在集群里面，集群之间的需要相互调用，如果要输入密码的话，会影响集群之间的调 用，这时候我们可以配置系统之间的ssh免密码登录。</p><p><strong>1.切换到hadoop用户</strong></p><h4 id="_2-ssh免秘钥生成" tabindex="-1">2.SSH免秘钥生成 <a class="header-anchor" href="#_2-ssh免秘钥生成" aria-hidden="true">#</a></h4><p>分别到四个虚拟机里面运行如下命令</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">ssh-keygen</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-t</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">dsa</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-P</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-f</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">~/.ssh/id_dsa</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="_3-分发自己的密码给需要免密登录的其它主机" tabindex="-1">3.分发自己的密码给需要免密登录的其它主机 <a class="header-anchor" href="#_3-分发自己的密码给需要免密登录的其它主机" aria-hidden="true">#</a></h4><div class="warning custom-block"><p class="custom-block-title">注意:</p><p>要对自己进行免密登录。</p></div><p><strong>node01上分别执行:</strong></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">ssh-copy-id</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">hadoop@node01</span></span>
<span class="line"><span style="color:#FFCB6B;">ssh-copy-id</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">hadoop@node02</span></span>
<span class="line"><span style="color:#FFCB6B;">ssh-copy-id</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">hadoop@node03</span></span>
<span class="line"><span style="color:#FFCB6B;">ssh-copy-id</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">hadoop@node04</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>node02上分别执行:</strong></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">ssh-copy-id</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">hadoop@node01</span></span>
<span class="line"><span style="color:#FFCB6B;">ssh-copy-id</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">hadoop@node02</span></span>
<span class="line"><span style="color:#FFCB6B;">ssh-copy-id</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">hadoop@node03</span></span>
<span class="line"><span style="color:#FFCB6B;">ssh-copy-id</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">hadoop@node04</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>node03上分别执行:</strong></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">ssh-copy-id</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">hadoop@node01</span></span>
<span class="line"><span style="color:#FFCB6B;">ssh-copy-id</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">hadoop@node02</span></span>
<span class="line"><span style="color:#FFCB6B;">ssh-copy-id</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">hadoop@node03</span></span>
<span class="line"><span style="color:#FFCB6B;">ssh-copy-id</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">hadoop@node04</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>node04上分别执行:</strong></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">ssh-copy-id</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">hadoop@node01</span></span>
<span class="line"><span style="color:#FFCB6B;">ssh-copy-id</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">hadoop@node02</span></span>
<span class="line"><span style="color:#FFCB6B;">ssh-copy-id</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">hadoop@node03</span></span>
<span class="line"><span style="color:#FFCB6B;">ssh-copy-id</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">hadoop@node04</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>4.测试</strong></p><p><strong>使用 ssh 连接指令测试四台虚拟机之间是否全都可以免密登陆</strong></p><p><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk/hadoop28.jpg" alt="hadoop28"></p><div class="tip custom-block"><p class="custom-block-title">配置完成</p><p>分别对四台虚拟机拍摄快照，配置完成</p></div>`,155),o=[p];function t(r,c,i,d,F,h){return a(),n("div",null,o)}const b=s(e,[["render",t]]);export{u as __pageData,b as default};

import{_ as s,c as n,o as a,a as l}from"./app.82736834.js";const b=JSON.parse('{"title":"xz","description":"","frontmatter":{},"headers":[{"level":2,"title":"补充说明","slug":"补充说明","link":"#补充说明","children":[{"level":3,"title":"语法","slug":"语法","link":"#语法","children":[]},{"level":3,"title":"选项","slug":"选项","link":"#选项","children":[]},{"level":3,"title":"参数","slug":"参数","link":"#参数","children":[]},{"level":3,"title":"实例","slug":"实例","link":"#实例","children":[]}]}],"relativePath":"linux/command/pages/xz.md","lastUpdated":1666509709000}'),p={name:"linux/command/pages/xz.md"},e=l(`<h1 id="xz" tabindex="-1">xz <a class="header-anchor" href="#xz" aria-hidden="true">#</a></h1><p>POSIX 平台开发具有高压缩率的工具</p><h2 id="补充说明" tabindex="-1">补充说明 <a class="header-anchor" href="#补充说明" aria-hidden="true">#</a></h2><p><strong>xz命令</strong> XZ Utils 是为 POSIX 平台开发具有高压缩率的工具。它使用 LZMA2 压缩算法，生成的压缩文件比 POSIX 平台传统使用的 gzip、bzip2 生成的压缩文件更小，而且解压缩速度也很快。最初 XZ Utils 的是基于 LZMA-SDK 开发，但是 LZMA-SDK 包含了一些 WINDOWS 平台的特性，所以 XZ Utils 为以适应 POSIX 平台作了大幅的修改。XZ Utils 的出现也是为了取代 POSIX 系统中旧的 LZMA Utils。</p><h3 id="语法" tabindex="-1">语法 <a class="header-anchor" href="#语法" aria-hidden="true">#</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">xz(选项</span><span style="color:#EEFFFF;">)</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">参数</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#FFCB6B;">xz</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">OPTION</span><span style="color:#89DDFF;">]</span><span style="color:#EEFFFF;">... </span><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">FILE</span><span style="color:#89DDFF;">]</span><span style="color:#EEFFFF;">...</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="选项" tabindex="-1">选项 <a class="header-anchor" href="#选项" aria-hidden="true">#</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">-z,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--compress</span><span style="color:#EEFFFF;">    </span><span style="color:#545454;font-style:italic;"># 强制压缩</span></span>
<span class="line"><span style="color:#FFCB6B;">-d,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--decompress,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--uncompress</span></span>
<span class="line"><span style="color:#EEFFFF;">                  </span><span style="color:#545454;font-style:italic;"># force decompression</span></span>
<span class="line"><span style="color:#FFCB6B;">-t,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--test</span><span style="color:#EEFFFF;">        </span><span style="color:#545454;font-style:italic;"># 测试压缩文件的完整性</span></span>
<span class="line"><span style="color:#FFCB6B;">-l,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--list</span><span style="color:#EEFFFF;">        </span><span style="color:#545454;font-style:italic;"># 列出有关.xz文件的信息</span></span>
<span class="line"><span style="color:#FFCB6B;">-k,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--keep</span><span style="color:#EEFFFF;">        </span><span style="color:#545454;font-style:italic;"># 保留（不要删除）输入文件</span></span>
<span class="line"><span style="color:#FFCB6B;">-f,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--force</span><span style="color:#EEFFFF;">       </span><span style="color:#545454;font-style:italic;"># 强制覆盖输出文件和（解）压缩链接</span></span>
<span class="line"><span style="color:#FFCB6B;">-c,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--stdout,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--to-stdout</span></span>
<span class="line"><span style="color:#EEFFFF;">                  </span><span style="color:#545454;font-style:italic;"># 写入标准输出，不要删除输入文件</span></span>
<span class="line"><span style="color:#FFCB6B;">-0</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">...</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-9</span><span style="color:#EEFFFF;">         </span><span style="color:#545454;font-style:italic;"># 压缩预设; 默认为6; 取压缩机*和*</span></span>
<span class="line"><span style="color:#EEFFFF;">                  </span><span style="color:#545454;font-style:italic;"># 使用7-9之前解压缩内存使用量考虑在内！</span></span>
<span class="line"><span style="color:#FFCB6B;">-e,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--extreme</span><span style="color:#EEFFFF;">     </span><span style="color:#545454;font-style:italic;"># 尝试通过使用更多的CPU时间来提高压缩比;</span></span>
<span class="line"><span style="color:#EEFFFF;">                  </span><span style="color:#545454;font-style:italic;"># 要求不影响解压缩存储器</span></span>
<span class="line"><span style="color:#FFCB6B;">-T,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--threads=NUM</span><span style="color:#EEFFFF;"> </span><span style="color:#545454;font-style:italic;"># 最多使用NUM个线程; 默认值为1;  set to 0</span></span>
<span class="line"><span style="color:#EEFFFF;">                  </span><span style="color:#545454;font-style:italic;"># 设置为0，使用与处理器内核一样多的线程</span></span>
<span class="line"><span style="color:#FFCB6B;">-q,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--quiet</span><span style="color:#EEFFFF;">       </span><span style="color:#545454;font-style:italic;"># 抑制警告; 指定两次以抑制错误</span></span>
<span class="line"><span style="color:#FFCB6B;">-v,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--verbose</span><span style="color:#EEFFFF;">     </span><span style="color:#545454;font-style:italic;"># 冗长; 指定两次更详细</span></span>
<span class="line"><span style="color:#FFCB6B;">-h,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--help</span><span style="color:#EEFFFF;">        </span><span style="color:#545454;font-style:italic;"># 显示这个简洁的帮助并退出</span></span>
<span class="line"><span style="color:#FFCB6B;">-H,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--long-help</span><span style="color:#EEFFFF;">   </span><span style="color:#545454;font-style:italic;"># 显示更多帮助（还列出了高级选项）</span></span>
<span class="line"><span style="color:#FFCB6B;">-V,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--version</span><span style="color:#EEFFFF;">     </span><span style="color:#545454;font-style:italic;"># 显示版本号并退出</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="参数" tabindex="-1">参数 <a class="header-anchor" href="#参数" aria-hidden="true">#</a></h3><ul><li>源文件：指定连接的源文件。</li><li>目标文件：指定源文件的目标连接文件。</li></ul><h3 id="实例" tabindex="-1">实例 <a class="header-anchor" href="#实例" aria-hidden="true">#</a></h3><p>压缩一个文件 test.txt，压缩成功后生成 test.txt.xz, 原文件会被删除。</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">xz</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">test.txt</span></span>
<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">ls</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">test.txt</span><span style="color:#EEFFFF;">*</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">test</span><span style="color:#FFCB6B;">.txt.xz</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>解压 test.txt.xz 文件，并使用参数 -k 保持原文件不被删除</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">xz</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-d</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-k</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">test.txt.xz</span></span>
<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">ls</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">test.txt</span><span style="color:#EEFFFF;">*</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">test</span><span style="color:#FFCB6B;">.txt.xz</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">test.txt</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>使用参数 -l 显示 .xz 文件的基本信息。基本信息包括压缩率、数据完整性验证方式等。也可以和参数 -v 或 -vv 配合显示更详尽的信息。</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">xz</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-l</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">index.txt.xz</span></span>
<span class="line"><span style="color:#545454;font-style:italic;"># Strms  Blocks   Compressed Uncompressed  Ratio  Check   Filename</span></span>
<span class="line"><span style="color:#545454;font-style:italic;">#    1       1        768 B      1,240 B  0.619  CRC64   index.txt.</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>使用参数 -0, -1, -2, … -6, … -9 或参数 --fast, --best 设定压缩率。xz 命令的默认为 -6 ，对于大多数系统来说，甚至是一些较旧的系统，-4 … -6 压缩率预设值都不错的表现。</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">xz</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-k7</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">xz_pipe_decomp_mini.c</span></span>
<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">xz</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-k</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--fast</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">xz_pipe_decomp_mini.c</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>使用参数 -H 显示 xz 命令所有 options. 参数 -H 比使用参数 --help 显示的内容更详细。</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">xz</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-H</span><span style="color:#EEFFFF;">  </span><span style="color:#89DDFF;">|</span><span style="color:#EEFFFF;"> </span><span style="color:#FFCB6B;">more</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>借助 xargs 命令并行压缩多文件。下面的命令行可以将 /var/log 目录下所有的扩展名为 .log 的文件压缩。通过 xargs 命令同时运行多个 xz 进行压缩。</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#545454;font-style:italic;"># 运行此命令须有 root 权限。</span></span>
<span class="line"><span style="color:#FFCB6B;">find</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/var/log</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-type</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">f</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-iname</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">*.log</span><span style="color:#89DDFF;">&quot;</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-print0</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">|</span><span style="color:#EEFFFF;"> </span><span style="color:#FFCB6B;">xargs</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-P4</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-n16</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">xz</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-T1</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div>`,23),o=[e];function t(r,c,F,i,y,E){return a(),n("div",null,o)}const u=s(p,[["render",t]]);export{b as __pageData,u as default};

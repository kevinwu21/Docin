import{_ as s,c as a,o as n,a as l}from"./app.82736834.js";const u=JSON.parse('{"title":"1.x 完全分布式","description":"","frontmatter":{},"headers":[{"level":2,"title":"1.上传hadoop安装文件hadoop-3.1.4.tar.gz，然后解压","slug":"_1-上传hadoop安装文件hadoop-3-1-4-tar-gz-然后解压","link":"#_1-上传hadoop安装文件hadoop-3-1-4-tar-gz-然后解压","children":[]},{"level":2,"title":"2.在四台机器上面创建目录","slug":"_2-在四台机器上面创建目录","link":"#_2-在四台机器上面创建目录","children":[]},{"level":2,"title":"3.配置环境变量","slug":"_3-配置环境变量","link":"#_3-配置环境变量","children":[]},{"level":2,"title":"4.配置 node01 上的hadoop-3.1.4/etc/hadoop/hadoop-env.sh文件","slug":"_4-配置-node01-上的hadoop-3-1-4-etc-hadoop-hadoop-env-sh文件","link":"#_4-配置-node01-上的hadoop-3-1-4-etc-hadoop-hadoop-env-sh文件","children":[]},{"level":2,"title":"5.配置 node01 上的hadoop-3.1.4/etc/hadoop/core-site.xml文件","slug":"_5-配置-node01-上的hadoop-3-1-4-etc-hadoop-core-site-xml文件","link":"#_5-配置-node01-上的hadoop-3-1-4-etc-hadoop-core-site-xml文件","children":[]},{"level":2,"title":"6.配置 node01 上的hadoop-3.1.4/etc/hadoop/hdfs-site.xml文件","slug":"_6-配置-node01-上的hadoop-3-1-4-etc-hadoop-hdfs-site-xml文件","link":"#_6-配置-node01-上的hadoop-3-1-4-etc-hadoop-hdfs-site-xml文件","children":[]},{"level":2,"title":"7.配置workers文件","slug":"_7-配置workers文件","link":"#_7-配置workers文件","children":[]},{"level":2,"title":"8.使用 scp 向 node02、node03、node04 分发配置文件。","slug":"_8-使用-scp-向-node02、node03、node04-分发配置文件。","link":"#_8-使用-scp-向-node02、node03、node04-分发配置文件。","children":[]},{"level":2,"title":"9.格式化","slug":"_9-格式化","link":"#_9-格式化","children":[]},{"level":2,"title":"10.启动集群","slug":"_10-启动集群","link":"#_10-启动集群","children":[]},{"level":2,"title":"11.集群测试","slug":"_11-集群测试","link":"#_11-集群测试","children":[]},{"level":2,"title":"12.关闭集群","slug":"_12-关闭集群","link":"#_12-关闭集群","children":[]},{"level":2,"title":"13.拍摄快照","slug":"_13-拍摄快照","link":"#_13-拍摄快照","children":[]}],"relativePath":"linux/hadoop/3fullyDistribution1.md","lastUpdated":1664448200000}'),e={name:"linux/hadoop/3fullyDistribution1.md"},p=l(`<h1 id="_1-x-完全分布式" tabindex="-1">1.x 完全分布式 <a class="header-anchor" href="#_1-x-完全分布式" aria-hidden="true">#</a></h1><blockquote><p>我们上面搭建的是伪分布式，就是多个角色由一个节点来承但，伪分布式是完全分布式的一种特例，下面我们来搭建hadoop1.x中的完全分布式，也是最简单的一种分布式搭建方式。</p></blockquote><p><strong>搭建前提</strong></p><p>全分布的搭建是在上面四台虚拟机基础上搭建，具体包括以下几点。</p><ol><li>网络配置:静态ip、主机名配置、ip 与主机的映射</li><li>关闭防火墙，关闭 SELINUX</li><li>时钟同步</li><li>ssh 免密登录:四台机器之间可以 ssh 免密登录</li><li>预装 JDK</li></ol><p><strong>角色分配</strong></p><table><thead><tr><th style="text-align:center;">集群节点</th><th style="text-align:center;">NameNode</th><th style="text-align:center;">SecondaryNameNode</th><th style="text-align:center;">DataNode</th><th style="text-align:center;">说明</th></tr></thead><tbody><tr><td style="text-align:center;">node01</td><td style="text-align:center;"><strong>※</strong></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;">名称节点</td></tr><tr><td style="text-align:center;">node02</td><td style="text-align:center;"></td><td style="text-align:center;"><strong>※</strong></td><td style="text-align:center;"><strong>※</strong></td><td style="text-align:center;">第二名称节点、数据节点</td></tr><tr><td style="text-align:center;">node03</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"><strong>※</strong></td><td style="text-align:center;">数据节点</td></tr><tr><td style="text-align:center;">node04</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"><strong>※</strong></td><td style="text-align:center;">数据节点</td></tr></tbody></table><p><strong>注意：我们这里搭建的完全分布式，其实是Hadoop1.x里面的完全分布式</strong></p><p><strong>搭建步骤</strong></p><p><strong>搭建的整体思想：一台机器上将Hadoop配置完毕，然后然后将这个配置好的Hadoop使用&quot;scp&quot;进行分发</strong></p><h2 id="_1-上传hadoop安装文件hadoop-3-1-4-tar-gz-然后解压" tabindex="-1">1.上传hadoop安装文件hadoop-3.1.4.tar.gz，然后解压 <a class="header-anchor" href="#_1-上传hadoop安装文件hadoop-3-1-4-tar-gz-然后解压" aria-hidden="true">#</a></h2><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">tar</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-xvf</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">hadoop-3.1.4.tar.gz</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="_2-在四台机器上面创建目录" tabindex="-1">2.在四台机器上面创建目录 <a class="header-anchor" href="#_2-在四台机器上面创建目录" aria-hidden="true">#</a></h2><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">mkdir</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/home/hadoop/hadoop-data/full</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="_3-配置环境变量" tabindex="-1">3.配置环境变量 <a class="header-anchor" href="#_3-配置环境变量" aria-hidden="true">#</a></h2><p>在node01中用hadoop用户登录，在/home/hadoop/.bash_profile做如下配置:</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#545454;font-style:italic;"># JAVA_HOME 指定jdk的路径，也就是JKD的解压路径</span></span>
<span class="line"><span style="color:#C792EA;">export</span><span style="color:#EEFFFF;"> JAVA_HOME</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">/home/hadoop/jdk1.8.0_281</span></span>
<span class="line"></span>
<span class="line"><span style="color:#545454;font-style:italic;"># 配置HADOOP_HOME，hadoop的路径</span></span>
<span class="line"><span style="color:#C792EA;">export</span><span style="color:#EEFFFF;"> HADOOP_HOME</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">/home/hadoop/hadoop-3.1.4</span></span>
<span class="line"></span>
<span class="line"><span style="color:#545454;font-style:italic;"># 指定classpath</span></span>
<span class="line"><span style="color:#C792EA;">export</span><span style="color:#EEFFFF;"> CLASSPATH</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">.:</span><span style="color:#EEFFFF;">$JAVA_HOME</span><span style="color:#C3E88D;">/lib/tools.jar:</span><span style="color:#EEFFFF;">$JAVA_HOME</span><span style="color:#C3E88D;">/lib/dt.jar:</span><span style="color:#EEFFFF;">$JAVA_HOME</span><span style="color:#C3E88D;">/lib</span></span>
<span class="line"></span>
<span class="line"><span style="color:#545454;font-style:italic;"># 把jdk的bin目录加到path环境变量，把hadoop的bin、sbin目录加到环境变量</span></span>
<span class="line"><span style="color:#C792EA;">export</span><span style="color:#EEFFFF;"> PATH</span><span style="color:#89DDFF;">=</span><span style="color:#EEFFFF;">$PATH</span><span style="color:#C3E88D;">:</span><span style="color:#EEFFFF;">$JAVA_HOME</span><span style="color:#C3E88D;">/bin:</span><span style="color:#EEFFFF;">$HADOOP_HOME</span><span style="color:#C3E88D;">/bin:</span><span style="color:#EEFFFF;">$HADOOP_HOME</span><span style="color:#C3E88D;">/sbin</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>使用scp命令对.bash_profile文件往node02、node03、node04完成分发。</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#545454;font-style:italic;"># 对node02进行分发</span></span>
<span class="line"><span style="color:#FFCB6B;">scp</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/home/hadoop/.bash_profile</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">node02:/home/hadoop/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#545454;font-style:italic;"># 对node03进行分发</span></span>
<span class="line"><span style="color:#FFCB6B;">scp</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/home/hadoop/.bash_profile</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">node03:/home/hadoop/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#545454;font-style:italic;"># 对node04进行分发</span></span>
<span class="line"><span style="color:#FFCB6B;">scp</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/home/hadoop/.bash_profile</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">node04:/home/hadoop/</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>完成分发以后在node02、node02、node03、node04机器上分别使用source命令使得环境变量生效。</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#82AAFF;">source</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">.bash_profile</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="_4-配置-node01-上的hadoop-3-1-4-etc-hadoop-hadoop-env-sh文件" tabindex="-1">4.配置 node01 上的hadoop-3.1.4/etc/hadoop/hadoop-env.sh文件 <a class="header-anchor" href="#_4-配置-node01-上的hadoop-3-1-4-etc-hadoop-hadoop-env-sh文件" aria-hidden="true">#</a></h2><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#545454;font-style:italic;"># 配置JAVA_HOME</span></span>
<span class="line"><span style="color:#C792EA;">export</span><span style="color:#EEFFFF;"> JAVA_HOME</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">/home/hadoop/jdk1.8.0_281</span></span>
<span class="line"><span style="color:#545454;font-style:italic;"># 配置HADOOP_HOME</span></span>
<span class="line"><span style="color:#C792EA;">export</span><span style="color:#EEFFFF;"> HADOOP_HOME</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">/home/hadoop/hadoop-3.1.4</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk/hadoop29.jpg" alt="hadoop29"></p><h2 id="_5-配置-node01-上的hadoop-3-1-4-etc-hadoop-core-site-xml文件" tabindex="-1">5.配置 node01 上的hadoop-3.1.4/etc/hadoop/core-site.xml文件 <a class="header-anchor" href="#_5-配置-node01-上的hadoop-3-1-4-etc-hadoop-core-site-xml文件" aria-hidden="true">#</a></h2><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#EEFFFF;">configuration</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#EEFFFF;">	</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">property&gt;</span></span>
<span class="line"><span style="color:#EEFFFF;">		</span><span style="color:#89DDFF;">&lt;!</span><span style="color:#FFCB6B;">--</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">配置HDFS:配置的是NameNode的所在地</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#EEFFFF;">		</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">name&gt;fs.defaultFS&lt;/name&gt;</span></span>
<span class="line"><span style="color:#EEFFFF;">		</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">value&gt;hdfs://node01:9000&lt;/value&gt;</span></span>
<span class="line"><span style="color:#EEFFFF;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">/property&gt;</span></span>
<span class="line"><span style="color:#EEFFFF;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">property&gt;</span></span>
<span class="line"><span style="color:#EEFFFF;">		</span><span style="color:#89DDFF;">&lt;!</span><span style="color:#FFCB6B;">--</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">hadoop临时目录</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#EEFFFF;">		</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">name&gt;hadoop.tmp.dir&lt;/name&gt;</span></span>
<span class="line"><span style="color:#EEFFFF;">		</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">value&gt;/home/hadoop/hadoop-data/full&lt;/value&gt;</span></span>
<span class="line"><span style="color:#EEFFFF;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">/property&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#EEFFFF;">/configuration</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="_6-配置-node01-上的hadoop-3-1-4-etc-hadoop-hdfs-site-xml文件" tabindex="-1">6.配置 node01 上的hadoop-3.1.4/etc/hadoop/hdfs-site.xml文件 <a class="header-anchor" href="#_6-配置-node01-上的hadoop-3-1-4-etc-hadoop-hdfs-site-xml文件" aria-hidden="true">#</a></h2><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#EEFFFF;">configuration</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#EEFFFF;">	</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">property&gt;</span></span>
<span class="line"><span style="color:#EEFFFF;">		</span><span style="color:#89DDFF;">&lt;!</span><span style="color:#FFCB6B;">--</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">配置副本数为3</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#EEFFFF;">		</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">name&gt;dfs.replication&lt;/name&gt;</span></span>
<span class="line"><span style="color:#EEFFFF;">		</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">value&gt;3&lt;/value&gt;</span></span>
<span class="line"><span style="color:#EEFFFF;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">/property&gt;</span></span>
<span class="line"><span style="color:#EEFFFF;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">property&gt;</span></span>
<span class="line"><span style="color:#EEFFFF;">		</span><span style="color:#89DDFF;">&lt;!</span><span style="color:#FFCB6B;">--</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">配置SNN为node02</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">--</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#EEFFFF;">		</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">name&gt;dfs.namenode.secondary.http-address&lt;/name&gt;</span></span>
<span class="line"><span style="color:#EEFFFF;">		</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">value&gt;node02:9868&lt;/value&gt;</span></span>
<span class="line"><span style="color:#EEFFFF;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">/property&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#EEFFFF;">/configuration</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="_7-配置workers文件" tabindex="-1">7.配置workers文件 <a class="header-anchor" href="#_7-配置workers文件" aria-hidden="true">#</a></h2><p>hadoop3.x版本以前叫slavers</p><p>里面配置的是DataNode信息</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">node02</span></span>
<span class="line"><span style="color:#FFCB6B;">node03</span></span>
<span class="line"><span style="color:#FFCB6B;">node04</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_8-使用-scp-向-node02、node03、node04-分发配置文件。" tabindex="-1">8.使用 scp 向 node02、node03、node04 分发配置文件。 <a class="header-anchor" href="#_8-使用-scp-向-node02、node03、node04-分发配置文件。" aria-hidden="true">#</a></h2><ul><li><strong>分发之前，在node01、node02、node03、node04先创建好目录结构</strong></li></ul><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">mkdir</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/home/hadoop/hadoop-data/full</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>然后进入到hadoop的安装路径，此处是/home/hadoop，也就是之前创建的hadoop主目录</strong></li></ul><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/home/hadoop</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>使用 scp 命令在 node01 上对 hadoop-3.1.4 目录往 node02、node03、node04 完成分发</strong></li></ul><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#545454;font-style:italic;"># 对node02进行分发</span></span>
<span class="line"><span style="color:#FFCB6B;">scp</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-r</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/home/hadoop/hadoop-3.1.4</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">node02:/home/hadoop/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#545454;font-style:italic;"># 对node03进行分发</span></span>
<span class="line"><span style="color:#FFCB6B;">scp</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-r</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/home/hadoop/hadoop-3.1.4</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">node03:/home/hadoop/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#545454;font-style:italic;"># 对node04进行分发</span></span>
<span class="line"><span style="color:#FFCB6B;">scp</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-r</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/home/hadoop/hadoop-3.1.4</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">node04:/home/hadoop/</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_9-格式化" tabindex="-1">9.格式化 <a class="header-anchor" href="#_9-格式化" aria-hidden="true">#</a></h2><ul><li>集群启动前，要先进行格式化，由于我们 NameNode 配置在 node01 上，所以是在 node01 上进行格式化，并且只要格式化一次。</li></ul><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">hdfs</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">namenode</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-format</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="_10-启动集群" tabindex="-1">10.启动集群 <a class="header-anchor" href="#_10-启动集群" aria-hidden="true">#</a></h2><ul><li>在 node01 上面启动集群，我们先启动hdfs。</li></ul><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#545454;font-style:italic;"># 在node01上启动</span></span>
<span class="line"><span style="color:#FFCB6B;">start-dfs.sh</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk/hadoop47.jpg" alt="hadoop47" style="zoom:70%;"><ul><li>查看各个节点的角色的运行情况，我们使用<strong>jps</strong>命令。</li></ul><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">jps</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>node01 运行情况:</strong></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">hadoop@node01 full</span><span style="color:#89DDFF;">]</span><span style="color:#EEFFFF;">$ jps</span></span>
<span class="line"><span style="color:#F78C6C;">10435</span><span style="color:#EEFFFF;"> NameNode</span></span>
<span class="line"><span style="color:#F78C6C;">10750</span><span style="color:#EEFFFF;"> Jps</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>node02 运行情况:</strong></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">hadoop@node02 full</span><span style="color:#89DDFF;">]</span><span style="color:#EEFFFF;">$ jps</span></span>
<span class="line"><span style="color:#F78C6C;">10603</span><span style="color:#EEFFFF;"> Jps</span></span>
<span class="line"><span style="color:#F78C6C;">10476</span><span style="color:#EEFFFF;"> SecondaryNameNode</span></span>
<span class="line"><span style="color:#F78C6C;">10397</span><span style="color:#EEFFFF;"> DataNode</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>node03 运行情况:</strong></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">hadoop@node03 full</span><span style="color:#89DDFF;">]</span><span style="color:#EEFFFF;">$ jps</span></span>
<span class="line"><span style="color:#F78C6C;">9938</span><span style="color:#EEFFFF;"> DataNode</span></span>
<span class="line"><span style="color:#F78C6C;">10050</span><span style="color:#EEFFFF;"> Jps</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>node04 运行情况:</strong></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">hadoop@node04 full</span><span style="color:#89DDFF;">]</span><span style="color:#EEFFFF;">$ jps</span></span>
<span class="line"><span style="color:#F78C6C;">10083</span><span style="color:#EEFFFF;"> DataNode</span></span>
<span class="line"><span style="color:#F78C6C;">10197</span><span style="color:#EEFFFF;"> Jps</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>浏览器查看下面三个URL</li></ul><blockquote><p><a href="http://node01:9870/dfshealth.html#tab-overview" target="_blank" rel="noreferrer">http://node01:9870/dfshealth.html#tab-overview</a></p><p><a href="http://node01:9870/dfshealth.html#tab-datanode" target="_blank" rel="noreferrer">http://node01:9870/dfshealth.html#tab-datanode</a></p><p><a href="http://node01:9870/explorer.html#/" target="_blank" rel="noreferrer">http://node01:9870/explorer.html#/</a></p></blockquote><p><strong>NameNode 运行情况:</strong></p><p><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk/hadoop48.jpg" alt="hadoop48"></p><p><strong>DataNode 运行情况:</strong></p><p><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk/hadoop49.jpg" alt="hadoop49"></p><p><strong>HDFS 运行情况:</strong></p><p><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk/hadoop50.jpg" alt="hadoop50"></p><h2 id="_11-集群测试" tabindex="-1">11.集群测试 <a class="header-anchor" href="#_11-集群测试" aria-hidden="true">#</a></h2><p>我们还是以 wordcount 来做为测试</p><ul><li>在HDFS里面创建两个目录 user、input</li></ul><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">hdfs</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">dfs</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-mkdir</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/user</span></span>
<span class="line"><span style="color:#FFCB6B;">hdfs</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">dfs</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-mkdir</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/input</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>准备测试文件 hello.txt，用来统计词频</li></ul><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">hello</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">world</span></span>
<span class="line"><span style="color:#FFCB6B;">hello</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">hadoop</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk/hadoop38.jpg" alt="hadoop38" style="zoom:67%;"><ul><li>把上面的 hello.txt 上传到 hdfs 的目录 /input</li></ul><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">hdfs</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">dfs</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-put</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">hello.txt</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/input</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>统计上面hello.txt文件的词频</li></ul><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">hadoop</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">jar</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/home/hadoop/hadoop-3.1.4/share/hadoop/mapreduce/hadoop-mapreduce-examples-3.1.4.jar</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">wordcount</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/input/</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/output/wc</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>查看运行结果</li></ul><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#545454;font-style:italic;"># 查看运行结构目录</span></span>
<span class="line"><span style="color:#FFCB6B;">hdfs</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">dfs</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-ls</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/output/wc/</span><span style="color:#EEFFFF;">*</span></span>
<span class="line"></span>
<span class="line"><span style="color:#545454;font-style:italic;"># 查看具体的统计结果</span></span>
<span class="line"><span style="color:#FFCB6B;">hdfs</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">dfs</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-cat</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/output/wc/part-r-</span><span style="color:#F78C6C;">00000</span></span>
<span class="line"></span>
<span class="line"><span style="color:#545454;font-style:italic;"># 下载HDFS文件内容到本地磁盘目录~/wc</span></span>
<span class="line"><span style="color:#FFCB6B;">hdfs</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">dfs</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-get</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/output/wc</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">~/wc</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_12-关闭集群" tabindex="-1">12.关闭集群 <a class="header-anchor" href="#_12-关闭集群" aria-hidden="true">#</a></h2><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">stop-dfs.sh</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="_13-拍摄快照" tabindex="-1">13.拍摄快照 <a class="header-anchor" href="#_13-拍摄快照" aria-hidden="true">#</a></h2><img src="https://notewk-1304925042.cos.ap-guangzhou.myqcloud.com/notewk/hadoop51.jpg" alt="hadoop51" style="zoom:40%;"><div class="tip custom-block"><p class="custom-block-title">配置完成</p><p>完全分布式配置成功 🎉 💯 🏆</p></div>`,82),o=[p];function t(r,c,i,d,F,h){return n(),a("div",null,o)}const b=s(e,[["render",t]]);export{u as __pageData,b as default};

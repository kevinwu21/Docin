import{_ as s,c as n,o as a,a as l}from"./app.82736834.js";const C=JSON.parse('{"title":"hdparm","description":"","frontmatter":{},"headers":[{"level":2,"title":"补充说明","slug":"补充说明","link":"#补充说明","children":[{"level":3,"title":"语法","slug":"语法","link":"#语法","children":[]},{"level":3,"title":"选项","slug":"选项","link":"#选项","children":[]},{"level":3,"title":"参数","slug":"参数","link":"#参数","children":[]},{"level":3,"title":"实例","slug":"实例","link":"#实例","children":[]}]}],"relativePath":"linux/command/pages/hdparm.md","lastUpdated":1666509709000}'),p={name:"linux/command/pages/hdparm.md"},e=l(`<h1 id="hdparm" tabindex="-1">hdparm <a class="header-anchor" href="#hdparm" aria-hidden="true">#</a></h1><p>显示与设定硬盘的参数</p><h2 id="补充说明" tabindex="-1">补充说明 <a class="header-anchor" href="#补充说明" aria-hidden="true">#</a></h2><p><strong>hdparm命令</strong> 提供了一个命令行的接口用于读取和设置IDE或SCSI硬盘参数。</p><h3 id="语法" tabindex="-1">语法 <a class="header-anchor" href="#语法" aria-hidden="true">#</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">hdparm(选项</span><span style="color:#EEFFFF;">)</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">参数</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="选项" tabindex="-1">选项 <a class="header-anchor" href="#选项" aria-hidden="true">#</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">-a&lt;快取分区&gt;：设定读取文件时，预先存入块区的分区数，若不加上&lt;快取分区&gt;选项，则显示目前的设定；</span></span>
<span class="line"><span style="color:#FFCB6B;">-A&lt;0或1&gt;：启动或关闭读取文件时的快取功能；</span></span>
<span class="line"><span style="color:#FFCB6B;">-c&lt;I/O模式&gt;：设定IDE32位I/O模式；</span></span>
<span class="line"><span style="color:#FFCB6B;">-C：检测IDE硬盘的电源管理模式；</span></span>
<span class="line"><span style="color:#FFCB6B;">-d&lt;0或1&gt;：设定磁盘的DMA模式；</span></span>
<span class="line"><span style="color:#FFCB6B;">-f：将内存缓冲区的数据写入硬盘，并清楚缓冲区；</span></span>
<span class="line"><span style="color:#FFCB6B;">-g：显示硬盘的磁轨，磁头，磁区等参数；</span></span>
<span class="line"><span style="color:#FFCB6B;">-h：显示帮助；</span></span>
<span class="line"><span style="color:#FFCB6B;">-i：显示硬盘的硬件规格信息，这些信息是在开机时由硬盘本身所提供；</span></span>
<span class="line"><span style="color:#FFCB6B;">-I：直接读取硬盘所提供的硬件规格信息；</span></span>
<span class="line"><span style="color:#FFCB6B;">-k&lt;0或1&gt;：重设硬盘时，保留-dmu参数的设定；</span></span>
<span class="line"><span style="color:#FFCB6B;">-K&lt;0或1&gt;：重设硬盘时，保留-APSWXZ参数的设定；</span></span>
<span class="line"><span style="color:#FFCB6B;">-m&lt;磁区数&gt;：设定硬盘多重分区存取的分区数；</span></span>
<span class="line"><span style="color:#FFCB6B;">-n&lt;0或1&gt;：忽略硬盘写入时所发生的错误；</span></span>
<span class="line"><span style="color:#FFCB6B;">-p&lt;PIO模式&gt;：设定硬盘的PIO模式；</span></span>
<span class="line"><span style="color:#FFCB6B;">-P&lt;磁区数&gt;：设定硬盘内部快取的分区数；</span></span>
<span class="line"><span style="color:#FFCB6B;">-q:在执行后续的参数时，不在屏幕上显示任何信息；</span></span>
<span class="line"><span style="color:#FFCB6B;">-r&lt;0或1&gt;:设定硬盘的读写模式；</span></span>
<span class="line"><span style="color:#FFCB6B;">-S&lt;时间&gt;:设定硬盘进入省电模式前的等待时间；</span></span>
<span class="line"><span style="color:#FFCB6B;">-t</span><span style="color:#89DDFF;">;</span><span style="color:#FFCB6B;">评估硬盘的读取效率；</span></span>
<span class="line"><span style="color:#FFCB6B;">-T：平谷硬盘快取的读取效率；</span></span>
<span class="line"><span style="color:#FFCB6B;">-u&lt;0或1&gt;：在硬盘存取时，允许其他中断要求同时执行；</span></span>
<span class="line"><span style="color:#FFCB6B;">-v：显示硬盘的相关设定；</span></span>
<span class="line"><span style="color:#FFCB6B;">-w&lt;0或1&gt;：设定硬盘的写入快取；</span></span>
<span class="line"><span style="color:#FFCB6B;">-X&lt;传输模式&gt;：设定硬盘的传输模式；</span></span>
<span class="line"><span style="color:#FFCB6B;">-y：使IDE硬盘进入省电模式；</span></span>
<span class="line"><span style="color:#FFCB6B;">-Y：使IDE硬盘进入睡眠模式；</span></span>
<span class="line"><span style="color:#FFCB6B;">-Z：关闭某些Seagate硬盘的自动省电功能。</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="参数" tabindex="-1">参数 <a class="header-anchor" href="#参数" aria-hidden="true">#</a></h3><p>设备文件：指定id驱动对应的设备文件名。</p><h3 id="实例" tabindex="-1">实例 <a class="header-anchor" href="#实例" aria-hidden="true">#</a></h3><p>显示硬盘的相关设置：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">hdparm</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/dev/sda</span></span>
<span class="line"><span style="color:#FFCB6B;">/dev/sda:</span></span>
<span class="line"><span style="color:#FFCB6B;">IO_support</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">=</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">default</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">16</span><span style="color:#C3E88D;">-bit</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">readonly</span><span style="color:#EEFFFF;"> = </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">off</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#FFCB6B;">readahead</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">=</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">256</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">on</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#FFCB6B;">geometry</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">=</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">19457</span><span style="color:#C3E88D;">［柱面数］/</span><span style="color:#F78C6C;">255</span><span style="color:#C3E88D;">［磁头数］/</span><span style="color:#F78C6C;">63</span><span style="color:#C3E88D;">［扇区数］,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">sectors</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">=</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">312581808</span><span style="color:#C3E88D;">［总扇区数］,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">start</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">=</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;">［起始扇区数］</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">\`\`\`</span><span style="color:#FFCB6B;">shell</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">显示硬盘的柱面、磁头、扇区数：</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">\`\`\`</span><span style="color:#FFCB6B;">shell</span></span>
<span class="line"><span style="color:#FFCB6B;">hdparm</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-g</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/dev/sda</span></span>
<span class="line"><span style="color:#FFCB6B;">/dev/sda:</span></span>
<span class="line"><span style="color:#FFCB6B;">geometry</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">=</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">19457</span><span style="color:#C3E88D;">［柱面数］/</span><span style="color:#F78C6C;">255</span><span style="color:#C3E88D;">［磁头数］/</span><span style="color:#F78C6C;">63</span><span style="color:#C3E88D;">［扇区数］,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">sectors</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">=</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">312581808</span><span style="color:#C3E88D;">［总扇区数］,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">start</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">=</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;">［起始扇区数］</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>测试硬盘的读取速度：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">hdparm</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-T</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/dev/sda</span></span>
<span class="line"><span style="color:#FFCB6B;">/dev/sda:</span></span>
<span class="line"><span style="color:#EEFFFF;"> </span><span style="color:#FFCB6B;">Timing</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">cached</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">reads:</span><span style="color:#EEFFFF;">   </span><span style="color:#F78C6C;">4684</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">MB</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">in</span><span style="color:#EEFFFF;">  </span><span style="color:#F78C6C;">2.00</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">seconds</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">=</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">2342.92</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">MB/sec</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>测试硬盘缓存的读取速度：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">hdparm</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-T</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/dev/xvda</span></span>
<span class="line"><span style="color:#FFCB6B;">/dev/xvda:</span></span>
<span class="line"><span style="color:#FFCB6B;">Timing</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">cached</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">reads:</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">11154</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">MB</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">in</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">1.98</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">seconds</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">=</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">5633.44</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">MB/sec</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>检测硬盘的电源管理模式：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">hdparm</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-C</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/dev/sda</span></span>
<span class="line"><span style="color:#FFCB6B;">/dev/sda:</span></span>
<span class="line"><span style="color:#FFCB6B;">drive</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">state</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">is:</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">standby</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">省电模式</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>查询并设置硬盘多重扇区存取的扇区数，以增进硬盘的存取效率：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">hdparm</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-m</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/dev/sda</span></span>
<span class="line"><span style="color:#FFCB6B;">hdparm</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-m</span><span style="color:#EEFFFF;">    </span><span style="color:#545454;font-style:italic;">#参数值为整数值如8 /dev/sda</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>附：硬盘坏道修复方法</strong></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">检查：smartctl</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-l</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">selftest</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/dev/sda</span></span>
<span class="line"><span style="color:#FFCB6B;">卸载：umount</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/dev/sda</span><span style="color:#EEFFFF;">*</span></span>
<span class="line"><span style="color:#FFCB6B;">修复：badblocks</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">/dev/sda</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div>`,23),o=[e];function r(c,F,t,i,y,d){return a(),n("div",null,o)}const b=s(p,[["render",r]]);export{C as __pageData,b as default};

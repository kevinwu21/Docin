import{_ as s,c as n,o as a,a as l}from"./app.82736834.js";const C=JSON.parse('{"title":"ulimit","description":"","frontmatter":{},"headers":[{"level":2,"title":"补充说明","slug":"补充说明","link":"#补充说明","children":[{"level":3,"title":"语法","slug":"语法","link":"#语法","children":[]},{"level":3,"title":"选项","slug":"选项","link":"#选项","children":[]},{"level":3,"title":"实例","slug":"实例","link":"#实例","children":[]}]}],"relativePath":"linux/command/pages/ulimit.md","lastUpdated":1666509709000}'),p={name:"linux/command/pages/ulimit.md"},o=l(`<h1 id="ulimit" tabindex="-1">ulimit <a class="header-anchor" href="#ulimit" aria-hidden="true">#</a></h1><p>控制shell程序的资源</p><h2 id="补充说明" tabindex="-1">补充说明 <a class="header-anchor" href="#补充说明" aria-hidden="true">#</a></h2><p><strong>ulimit命令</strong> 用来限制系统用户对shell资源的访问。如果不懂什么意思，下面一段内容可以帮助你理解：</p><p>假设有这样一种情况，当一台 Linux 主机上同时登陆了 10 个人，在系统资源无限制的情况下，这 10 个用户同时打开了 500 个文档，而假设每个文档的大小有 10M，这时系统的内存资源就会受到巨大的挑战。</p><p>而实际应用的环境要比这种假设复杂的多，例如在一个嵌入式开发环境中，各方面的资源都是非常紧缺的，对于开启文件描述符的数量，分配堆栈的大 小，CPU 时间，虚拟内存大小，等等，都有非常严格的要求。资源的合理限制和分配，不仅仅是保证系统可用性的必要条件，也与系统上软件运行的性能有着密不可分的联 系。这时，ulimit 可以起到很大的作用，它是一种简单并且有效的实现资源限制的方式。</p><p>ulimit 用于限制 shell 启动进程所占用的资源，支持以下各种类型的限制：所创建的内核文件的大小、进程数据块的大小、Shell 进程创建文件的大小、内存锁住的大小、常驻内存集的大小、打开文件描述符的数量、分配堆栈的最大大小、CPU 时间、单个用户的最大线程数、Shell 进程所能使用的最大虚拟内存。同时，它支持硬资源和软资源的限制。</p><p>作为临时限制，ulimit 可以作用于通过使用其命令登录的 shell 会话，在会话终止时便结束限制，并不影响于其他 shell 会话。而对于长期的固定限制，ulimit 命令语句又可以被添加到由登录 shell 读取的文件中，作用于特定的 shell 用户。</p><h3 id="语法" tabindex="-1">语法 <a class="header-anchor" href="#语法" aria-hidden="true">#</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#82AAFF;">ulimit</span><span style="color:#FFCB6B;">(选项</span><span style="color:#EEFFFF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="选项" tabindex="-1">选项 <a class="header-anchor" href="#选项" aria-hidden="true">#</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">-a：显示目前资源限制的设定；</span></span>
<span class="line"><span style="color:#FFCB6B;">-c</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">core文件上</span><span style="color:#EEFFFF;">限</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">：设定core文件的最大值，单位为区块；</span></span>
<span class="line"><span style="color:#FFCB6B;">-d</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">数据节区大</span><span style="color:#EEFFFF;">小</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">：程序数据节区的最大值，单位为KB；</span></span>
<span class="line"><span style="color:#FFCB6B;">-e</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">默认进程优先级,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">值越小优先级越高</span></span>
<span class="line"><span style="color:#FFCB6B;">-f</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">文件大</span><span style="color:#EEFFFF;">小</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">：shell所能建立的最大文件，单位为区块；</span></span>
<span class="line"><span style="color:#FFCB6B;">-H：设定资源的硬性限制，也就是管理员所设下的限制；</span></span>
<span class="line"><span style="color:#FFCB6B;">-m</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">内存大</span><span style="color:#EEFFFF;">小</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">：指定可使用内存的上限，单位为KB；</span></span>
<span class="line"><span style="color:#FFCB6B;">-n</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">文件数</span><span style="color:#EEFFFF;">目</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">：指定同一时间最多可开启的文件数；</span></span>
<span class="line"><span style="color:#FFCB6B;">-p</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">缓冲区大</span><span style="color:#EEFFFF;">小</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">：指定管道缓冲区的大小，单位512字节；</span></span>
<span class="line"><span style="color:#FFCB6B;">-s</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">堆叠大</span><span style="color:#EEFFFF;">小</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">：指定堆叠的上限，单位为KB；</span></span>
<span class="line"><span style="color:#FFCB6B;">-S：设定资源的弹性限制；</span></span>
<span class="line"><span style="color:#FFCB6B;">-t</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">CPU时</span><span style="color:#EEFFFF;">间</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">：指定CPU使用时间的上限，单位为秒；</span></span>
<span class="line"><span style="color:#FFCB6B;">-u</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">程序数</span><span style="color:#EEFFFF;">目</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">：用户最多可开启的程序数目；</span></span>
<span class="line"><span style="color:#FFCB6B;">-v</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">虚拟内存大</span><span style="color:#EEFFFF;">小</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">：指定可使用的虚拟内存上限，单位为KB。</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="实例" tabindex="-1">实例 <a class="header-anchor" href="#实例" aria-hidden="true">#</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@localhost </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># ulimit -a</span></span>
<span class="line"><span style="color:#FFCB6B;">core</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">file</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">size</span><span style="color:#EEFFFF;">          </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">blocks,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-c</span><span style="color:#89DDFF;">)</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">           </span><span style="color:#545454;font-style:italic;">#core文件的最大值为100 blocks。</span></span>
<span class="line"><span style="color:#FFCB6B;">data</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">seg</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">size</span><span style="color:#EEFFFF;">           </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">kbytes,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-d</span><span style="color:#89DDFF;">)</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">unlimited</span><span style="color:#EEFFFF;">   </span><span style="color:#545454;font-style:italic;">#进程的数据段可以任意大。</span></span>
<span class="line"><span style="color:#FFCB6B;">scheduling</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">priority</span><span style="color:#EEFFFF;">             </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">-e</span><span style="color:#89DDFF;">)</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#FFCB6B;">file</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">size</span><span style="color:#EEFFFF;">               </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">blocks,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-f</span><span style="color:#89DDFF;">)</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">unlimited</span><span style="color:#EEFFFF;">   </span><span style="color:#545454;font-style:italic;">#文件可以任意大。</span></span>
<span class="line"><span style="color:#FFCB6B;">pending</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">signals</span><span style="color:#EEFFFF;">                 </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">-i</span><span style="color:#89DDFF;">)</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">98304</span><span style="color:#EEFFFF;">       </span><span style="color:#545454;font-style:italic;">#最多有98304个待处理的信号。</span></span>
<span class="line"><span style="color:#FFCB6B;">max</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">locked</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">memory</span><span style="color:#EEFFFF;">       </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">kbytes,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-l</span><span style="color:#89DDFF;">)</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">32</span><span style="color:#EEFFFF;">          </span><span style="color:#545454;font-style:italic;">#一个任务锁住的物理内存的最大值为32KB。</span></span>
<span class="line"><span style="color:#FFCB6B;">max</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">memory</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">size</span><span style="color:#EEFFFF;">         </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">kbytes,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-m</span><span style="color:#89DDFF;">)</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">unlimited</span><span style="color:#EEFFFF;">   </span><span style="color:#545454;font-style:italic;">#一个任务的常驻物理内存的最大值。</span></span>
<span class="line"><span style="color:#FFCB6B;">open</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">files</span><span style="color:#EEFFFF;">                      </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">-n</span><span style="color:#89DDFF;">)</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">1024</span><span style="color:#EEFFFF;">        </span><span style="color:#545454;font-style:italic;">#一个任务最多可以同时打开1024的文件。</span></span>
<span class="line"><span style="color:#FFCB6B;">pipe</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">size</span><span style="color:#EEFFFF;">            </span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">512</span><span style="color:#EEFFFF;"> bytes, -p</span><span style="color:#89DDFF;">)</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">8</span><span style="color:#EEFFFF;">           </span><span style="color:#545454;font-style:italic;">#管道的最大空间为4096字节。</span></span>
<span class="line"><span style="color:#FFCB6B;">POSIX</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">message</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">queues</span><span style="color:#EEFFFF;">     </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">bytes,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-q</span><span style="color:#89DDFF;">)</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">819200</span><span style="color:#EEFFFF;">      </span><span style="color:#545454;font-style:italic;">#POSIX的消息队列的最大值为819200字节。</span></span>
<span class="line"><span style="color:#FFCB6B;">real-time</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">priority</span><span style="color:#EEFFFF;">              </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">-r</span><span style="color:#89DDFF;">)</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#FFCB6B;">stack</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">size</span><span style="color:#EEFFFF;">              </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">kbytes,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-s</span><span style="color:#89DDFF;">)</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">10240</span><span style="color:#EEFFFF;">       </span><span style="color:#545454;font-style:italic;">#进程的栈的最大值为10240字节。</span></span>
<span class="line"><span style="color:#FFCB6B;">cpu</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">time</span><span style="color:#EEFFFF;">               </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">seconds,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-t</span><span style="color:#89DDFF;">)</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">unlimited</span><span style="color:#EEFFFF;">   </span><span style="color:#545454;font-style:italic;">#进程使用的CPU时间。</span></span>
<span class="line"><span style="color:#FFCB6B;">max</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">user</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">processes</span><span style="color:#EEFFFF;">              </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">-u</span><span style="color:#89DDFF;">)</span><span style="color:#EEFFFF;"> </span><span style="color:#F78C6C;">98304</span><span style="color:#EEFFFF;">       </span><span style="color:#545454;font-style:italic;">#当前用户同时打开的进程（包括线程）的最大个数为98304。</span></span>
<span class="line"><span style="color:#FFCB6B;">virtual</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">memory</span><span style="color:#EEFFFF;">          </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">kbytes,</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-v</span><span style="color:#89DDFF;">)</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">unlimited</span><span style="color:#EEFFFF;">   </span><span style="color:#545454;font-style:italic;">#没有限制进程的最大地址空间。</span></span>
<span class="line"><span style="color:#FFCB6B;">file</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">locks</span><span style="color:#EEFFFF;">                      </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">-x</span><span style="color:#89DDFF;">)</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">unlimited</span><span style="color:#EEFFFF;">   </span><span style="color:#545454;font-style:italic;">#所能锁住的文件的最大个数没有限制。</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div>`,14),F=[o];function e(t,r,c,y,E,i){return a(),n("div",null,F)}const B=s(p,[["render",e]]);export{C as __pageData,B as default};

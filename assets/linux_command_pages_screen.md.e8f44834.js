import{_ as s,c as n,o as a,a as l}from"./app.82736834.js";const D=JSON.parse('{"title":"screen","description":"","frontmatter":{},"headers":[{"level":2,"title":"补充说明","slug":"补充说明","link":"#补充说明","children":[{"level":3,"title":"语法","slug":"语法","link":"#语法","children":[]},{"level":3,"title":"选项","slug":"选项","link":"#选项","children":[]},{"level":3,"title":"常用screen参数","slug":"常用screen参数","link":"#常用screen参数","children":[]},{"level":3,"title":"使用 screen","slug":"使用-screen","link":"#使用-screen","children":[]}]}],"relativePath":"linux/command/pages/screen.md","lastUpdated":1666512969000}'),p={name:"linux/command/pages/screen.md"},e=l(`<h1 id="screen" tabindex="-1">screen <a class="header-anchor" href="#screen" aria-hidden="true">#</a></h1><p>用于命令行终端切换</p><h2 id="补充说明" tabindex="-1">补充说明 <a class="header-anchor" href="#补充说明" aria-hidden="true">#</a></h2><p><strong>Screen</strong> 是一款由GNU计划开发的用于命令行终端切换的自由软件。用户可以通过该软件同时连接多个本地或远程的命令行会话，并在其间自由切换。GNU Screen可以看作是窗口管理器的命令行界面版本。它提供了统一的管理多个会话的界面和相应的功能。</p><p><strong>会话恢复</strong></p><p>只要Screen本身没有终止，在其内部运行的会话都可以恢复。这一点对于远程登录的用户特别有用——即使网络连接中断，用户也不会失去对已经打开的命令行会话的控制。只要再次登录到主机上执行screen -r就可以恢复会话的运行。同样在暂时离开的时候，也可以执行分离命令detach，在保证里面的程序正常运行的情况下让Screen挂起（切换到后台）。这一点和图形界面下的VNC很相似。</p><p><strong>多窗口</strong></p><p>在Screen环境下，所有的会话都独立的运行，并拥有各自的编号、输入、输出和窗口缓存。用户可以通过快捷键在不同的窗口下切换，并可以自由的重定向各个窗口的输入和输出。Screen实现了基本的文本操作，如复制粘贴等；还提供了类似滚动条的功能，可以查看窗口状况的历史记录。窗口还可以被分区和命名，还可以监视后台窗口的活动。 会话共享 Screen可以让一个或多个用户从不同终端多次登录一个会话，并共享会话的所有特性（比如可以看到完全相同的输出）。它同时提供了窗口访问权限的机制，可以对窗口进行密码保护。</p><p>GNU&#39;s Screen 官方站点：<a href="http://www.gnu.org/software/screen/" target="_blank" rel="noreferrer">http://www.gnu.org/software/screen/</a></p><h3 id="语法" tabindex="-1">语法 <a class="header-anchor" href="#语法" aria-hidden="true">#</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#545454;font-style:italic;"># screen -AmRvx -[ls -wipe][-d &lt;作业名称&gt;][-h &lt;行数&gt;][-r &lt;作业名称&gt;][-s ][-S &lt;作业名称&gt;]</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="选项" tabindex="-1">选项 <a class="header-anchor" href="#选项" aria-hidden="true">#</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">-A</span><span style="color:#EEFFFF;"> 　</span><span style="color:#C3E88D;">将所有的视窗都调整为目前终端机的大小。</span></span>
<span class="line"><span style="color:#FFCB6B;">-d</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">作业名</span><span style="color:#EEFFFF;">称</span><span style="color:#89DDFF;">&gt;</span><span style="color:#EEFFFF;"> 　</span><span style="color:#C3E88D;">将指定的screen作业离线。</span></span>
<span class="line"><span style="color:#FFCB6B;">-h</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">行</span><span style="color:#EEFFFF;">数</span><span style="color:#89DDFF;">&gt;</span><span style="color:#EEFFFF;"> 　</span><span style="color:#C3E88D;">指定视窗的缓冲区行数。</span></span>
<span class="line"><span style="color:#FFCB6B;">-m</span><span style="color:#EEFFFF;"> 　</span><span style="color:#C3E88D;">即使目前已在作业中的screen作业，仍强制建立新的screen作业。</span></span>
<span class="line"><span style="color:#FFCB6B;">-r</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">作业名</span><span style="color:#EEFFFF;">称</span><span style="color:#89DDFF;">&gt;</span><span style="color:#EEFFFF;"> 　</span><span style="color:#C3E88D;">恢复离线的screen作业。</span></span>
<span class="line"><span style="color:#FFCB6B;">-R</span><span style="color:#EEFFFF;"> 　</span><span style="color:#C3E88D;">先试图恢复离线的作业。若找不到离线的作业，即建立新的screen作业。</span></span>
<span class="line"><span style="color:#FFCB6B;">-s</span><span style="color:#EEFFFF;"> 　</span><span style="color:#C3E88D;">指定建立新视窗时，所要执行的shell。</span></span>
<span class="line"><span style="color:#FFCB6B;">-S</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">作业名</span><span style="color:#EEFFFF;">称</span><span style="color:#89DDFF;">&gt;</span><span style="color:#EEFFFF;"> 　</span><span style="color:#C3E88D;">指定screen作业的名称。</span></span>
<span class="line"><span style="color:#FFCB6B;">-v</span><span style="color:#EEFFFF;"> 　</span><span style="color:#C3E88D;">显示版本信息。</span></span>
<span class="line"><span style="color:#FFCB6B;">-x</span><span style="color:#EEFFFF;"> 　</span><span style="color:#C3E88D;">恢复之前离线的screen作业。</span></span>
<span class="line"><span style="color:#FFCB6B;">-ls或--list</span><span style="color:#EEFFFF;"> 　</span><span style="color:#C3E88D;">显示目前所有的screen作业。</span></span>
<span class="line"><span style="color:#FFCB6B;">-wipe</span><span style="color:#EEFFFF;"> 　</span><span style="color:#C3E88D;">检查目前所有的screen作业，并删除已经无法使用的screen作业。</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="常用screen参数" tabindex="-1">常用screen参数 <a class="header-anchor" href="#常用screen参数" aria-hidden="true">#</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">screen</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-S</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">yourname</span><span style="color:#EEFFFF;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">新建一个叫yourname的session</span></span>
<span class="line"><span style="color:#FFCB6B;">screen</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-ls</span><span style="color:#EEFFFF;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">列出当前所有的session</span></span>
<span class="line"><span style="color:#FFCB6B;">screen</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-r</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">yourname</span><span style="color:#EEFFFF;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">回到yourname这个session</span></span>
<span class="line"><span style="color:#FFCB6B;">screen</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-d</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">yourname</span><span style="color:#EEFFFF;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">远程detach某个session</span></span>
<span class="line"><span style="color:#FFCB6B;">screen</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-d</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">-r</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">yourname</span><span style="color:#EEFFFF;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">结束当前session并回到yourname这个session</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>在每个screen session 下，所有命令都以 ctrl+a(C-a) 开始。</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">C-a</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">?</span><span style="color:#EEFFFF;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">显示所有键绑定信息</span></span>
<span class="line"><span style="color:#FFCB6B;">C-a</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">c</span><span style="color:#EEFFFF;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">创建一个新的运行shell的窗口并切换到该窗口</span></span>
<span class="line"><span style="color:#FFCB6B;">C-a</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">n</span><span style="color:#EEFFFF;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">Next，切换到下一个</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">window</span></span>
<span class="line"><span style="color:#FFCB6B;">C-a</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">p</span><span style="color:#EEFFFF;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">Previous，切换到前一个</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">window</span></span>
<span class="line"><span style="color:#FFCB6B;">C-a</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">0..9</span><span style="color:#EEFFFF;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">切换到第</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">0..9</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">个</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">window</span></span>
<span class="line"><span style="color:#FFCB6B;">Ctrl+a</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">Space</span><span style="color:#89DDFF;">]</span><span style="color:#EEFFFF;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">由视窗0循序切换到视窗9</span></span>
<span class="line"><span style="color:#FFCB6B;">C-a</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">C-a</span><span style="color:#EEFFFF;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">在两个最近使用的</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">window</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">间切换</span></span>
<span class="line"><span style="color:#FFCB6B;">C-a</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">x</span><span style="color:#EEFFFF;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">锁住当前的</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">window，需用用户密码解锁</span></span>
<span class="line"><span style="color:#FFCB6B;">C-a</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">d</span><span style="color:#EEFFFF;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">detach，暂时离开当前session，将目前的</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">screen</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">session</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">可能含有多个</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">windows</span><span style="color:#89DDFF;">)</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">丢到后台执行，并会回到还没进</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">screen</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">时的状态，此时在</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">screen</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">session</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">里，每个</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">window</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">内运行的</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">process</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">无论是前台/后台</span><span style="color:#89DDFF;">)</span><span style="color:#EEFFFF;">都在继续执行，即使 </span><span style="color:#C3E88D;">logout</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">也不影响。</span></span>
<span class="line"><span style="color:#FFCB6B;">C-a</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">z</span><span style="color:#EEFFFF;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">把当前session放到后台执行，用</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">shell</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">的</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">fg</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">命令则可回去。</span></span>
<span class="line"><span style="color:#FFCB6B;">C-a</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">w</span><span style="color:#EEFFFF;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">显示所有窗口列表</span></span>
<span class="line"><span style="color:#FFCB6B;">C-a</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">t</span><span style="color:#EEFFFF;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">time，显示当前时间，和系统的</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">load</span></span>
<span class="line"><span style="color:#FFCB6B;">C-a</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">k</span><span style="color:#EEFFFF;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">kill</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">window，强行关闭当前的</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">window</span></span>
<span class="line"><span style="color:#FFCB6B;">C-a</span><span style="color:#EEFFFF;">  -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">进入</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">copy</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">mode，在</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">copy</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">mode</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">下可以回滚、搜索、复制就像用使用</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">vi 一样</span></span>
<span class="line"><span style="color:#EEFFFF;">    C-b Backward，PageUp</span></span>
<span class="line"><span style="color:#EEFFFF;">    C-f Forward，PageDown</span></span>
<span class="line"><span style="color:#EEFFFF;">    H(大写) High，将光标移至左上角</span></span>
<span class="line"><span style="color:#EEFFFF;">    L Low，将光标移至左下角</span></span>
<span class="line"><span style="color:#EEFFFF;">    </span><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;"> 移到行首</span></span>
<span class="line"><span style="color:#EEFFFF;">    $ 行末</span></span>
<span class="line"><span style="color:#EEFFFF;">    w forward one word，以字为单位往前移</span></span>
<span class="line"><span style="color:#EEFFFF;">    b backward one word，以字为单位往后移</span></span>
<span class="line"><span style="color:#EEFFFF;">    Space 第一次按为标记区起点，第二次按为终点</span></span>
<span class="line"><span style="color:#EEFFFF;">    Esc 结束 copy mode</span></span>
<span class="line"><span style="color:#EEFFFF;">C-a </span><span style="color:#89DDFF;">]</span><span style="color:#EEFFFF;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">paste，把刚刚在</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">copy</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">mode</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">选定的内容贴上</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="使用-screen" tabindex="-1">使用 screen <a class="header-anchor" href="#使用-screen" aria-hidden="true">#</a></h3><p><strong>安装screen</strong></p><p>流行的Linux发行版（例如Red Hat Enterprise Linux）通常会自带screen实用程序，如果没有的话，可以从GNU screen的官方网站下载。</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@TS-DEV </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># yum install screen</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@TS-DEV </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># rpm -qa</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">grep</span><span style="color:#EEFFFF;"> </span><span style="color:#C3E88D;">screen</span></span>
<span class="line"><span style="color:#FFCB6B;">screen-4.0.3-4.el5</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@TS-DEV </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;">#</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>创建一个新的窗口</strong></p><p>安装完成后，直接敲命令screen就可以启动它。但是这样启动的screen会话没有名字，实践上推荐为每个screen会话取一个名字，方便分辨：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@TS-DEV </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># screen -S david</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>screen启动后，会创建第一个窗口，也就是窗口No. 0，并在其中打开一个系统默认的shell，一般都会是bash。所以你敲入命令screen之后，会立刻又返回到命令提示符，仿佛什么也没有发生似的，其实你已经进入Screen的世界了。当然，也可以在screen命令之后加入你喜欢的参数，使之直接打开你指定的程序，例如：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@TS-DEV </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># screen vi david.txt</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>screen创建一个执行vi david.txt的单窗口会话，退出vi 将退出该窗口/会话。</p><p><strong>查看窗口和窗口名称</strong></p><p>打开多个窗口后，可以使用快捷键C-a w列出当前所有窗口。如果使用文本终端，这个列表会列在屏幕左下角，如果使用X环境下的终端模拟器，这个列表会列在标题栏里。窗口列表的样子一般是这样：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#F78C6C;">0</span><span style="color:#EEFFFF;">$ bash  </span><span style="color:#F78C6C;">1</span><span style="color:#EEFFFF;">-$ bash  </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">*</span><span style="color:#EEFFFF;">$ bash</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>这个例子中我开启了三个窗口，其中*号表示当前位于窗口2，-号表示上一次切换窗口时位于窗口1。</p><p>Screen默认会为窗口命名为编号和窗口中运行程序名的组合，上面的例子中窗口都是默认名字。练习了上面查看窗口的方法，你可能就希望各个窗口可以有不同的名字以方便区分了。可以使用快捷键C-a A来为当前窗口重命名，按下快捷键后，Screen会允许你为当前窗口输入新的名字，回车确认。</p><p><strong>会话分离与恢复</strong></p><p>你可以不中断screen窗口中程序的运行而暂时断开（detach）screen会话，并在随后时间重新连接（attach）该会话，重新控制各窗口中运行的程序。例如，我们打开一个screen窗口编辑/tmp/david.txt文件：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@TS-DEV </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># screen vi /tmp/david.txt</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>之后我们想暂时退出做点别的事情，比如出去散散步，那么在screen窗口键入C-a d，Screen会给出detached提示：</p><p>暂时中断会话</p><p>半个小时之后回来了，找到该screen会话：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@TS-DEV </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># screen -ls</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>重新连接会话：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-darker" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#EEFFFF;">root@TS-DEV </span><span style="color:#89DDFF;">~]</span><span style="color:#EEFFFF;"># screen -r </span><span style="color:#F78C6C;">12865</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>一切都在。</p><p>当然，如果你在另一台机器上没有分离一个Screen会话，就无从恢复会话了。这时可以使用下面命令强制将这个会话从它所在的终端分离，转移到新的终端上来：</p><p><strong>清除dead 会话</strong></p><p>如果由于某种原因其中一个会话死掉了（例如人为杀掉该会话），这时screen -list会显示该会话为dead状态。使用screen -wipe命令清除该会话：</p><p><strong>关闭或杀死一个Screen会话</strong></p><p>正常情况下，当你退出一个窗口中最后一个程序（通常是bash）后，这个窗口就关闭了。另一个关闭窗口的方法是使用<code>ctrl</code>+<code>a</code> 键，然后按下<code>k</code>键，最后当提示你是否要杀死这个会话时按下<code>y</code>键，这个快捷键会杀死当前的窗口，同时也将杀死这个窗口中正在运行的进程。</p><p>如果一个Screen会话中最后一个窗口被关闭了，那么整个Screen会话也就退出了，screen进程会被终止。</p><p>除了依次退出/杀死当前Screen会话中所有窗口这种方法之外，还可以使用快捷键C-a :，然后输入quit命令退出Screen会话。需要注意的是，这样退出会杀死所有窗口并退出其中运行的所有程序。其实C-a :这个快捷键允许用户直接输入的命令有很多，包括分屏可以输</p>`,49),o=[e];function F(r,c,t,E,y,i){return a(),n("div",null,o)}const C=s(p,[["render",F]]);export{D as __pageData,C as default};
